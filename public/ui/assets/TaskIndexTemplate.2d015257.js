import{aA as ct,aB as mt,a as h,t as Ye,V as R,Y as ne,$ as v,az as pe,X as k,W as me,ay as Rt,a7 as s,bv as At,bw as X,c as Bt,bf as Et,f as Ut,g as Lt,k as zt,bx as Kt,r as Y,w as ie,h as d,T as de,b as Wt,by as Jt,bz as Gt,q as Ze,a4 as P,aJ as Zt,bA as Xe,bB as Xt,bC as ea,bD as Te,i as ta,bE as aa,a6 as A,a2 as et,Q as vt,Z as la,_ as oa,aT as ce,b0 as Fe,S as Z,bm as tt,aW as na,aZ as ft,bF as ra,bG as sa,v as at,a1 as ua,a0 as lt}from"./index.d510ed45.js";import{I as Qe,_ as yt,a as ht}from"./ResourceForm.affcb3a8.js";import{F as gt,a as $e,Q as ia,C as ot}from"./FormModal.bf50ce24.js";import{u as da,b as ca,c as nt,Q as ma,a as rt}from"./QPopupProxy.48b18346.js";import{Q as Ie}from"./QSelect.3cee18ec.js";import{Q as _t,b as bt}from"./QMenu.e66367a1.js";import{c as va,Q as st}from"./QTabs.bab11733.js";import{Q as fa}from"./QForm.75657b46.js";import{Q as ya}from"./QToolbar.dc0fe3a3.js";import{Q as ha}from"./QList.74fe262e.js";import{s as ga}from"./selectRenderHooks.dfbe8647.js";import{_ as _a}from"./TagComponent.ebd5106e.js";const ba={__name:"NoteIndexTemplate",props:{id:Number,type:String,tabsConfig:Object},setup(a){const C=a,c={title:"Note",url:"custom-apps/notes",columns:[{name:"name",align:"left",label:"Name",field:"name",sortable:!0},{name:"note",align:"left",label:"Note",field:"note",sortable:!1,format:b=>b&&b.length>10?b.substring(0,10)+"...":b},{name:"created_at",align:"left",label:"Created at",field:"created_at",sortable:!0}],formInitialValues:{name:"",label:"",note:""},tabsConfig:C.tabsConfig,template:()=>ct(()=>mt(()=>import("./NoteFormTemplate.a1ef84f0.js"),["assets/NoteFormTemplate.a1ef84f0.js","assets/index.d510ed45.js","assets/index.9534a8ef.css","assets/QPopupProxy.48b18346.js","assets/QTooltip.c04ed348.js","assets/QMenu.e66367a1.js","assets/QTabs.bab11733.js","assets/QResizeObserver.076847df.js","assets/QSelect.3cee18ec.js","assets/QForm.75657b46.js"]))},f=gt(),g=Qe({title:c.title,url:c.url});g.hooksCycle.params.resolvedParams=b=>(b.params["filter[resource_id]"]=C.id,b.params["filter[resource_type]"]=C.type,b);const D=$e({title:c.title,url:c.url,initialValues:c.formInitialValues});D.hooksCycle.afterResolve=b=>(b.resource_id=C.id,b.resource_type=C.type,b),c.formHandleHooks=f,c.formHooks=D,c.indexHooks=g;const{form:V}=f,x=h(()=>c.template()),{resetFetch:M,refresh:i}=g;return Ye(()=>{i()}),(b,Q)=>(R(),ne("div",null,[v(yt,pe(c,{bodyClass:"q-pa-sm"}),null,16),v(ht,pe({formStyle:"width: 600px; max-width:90vw;",ref_key:"form",ref:V},c,{onOnCreate:s(M),onOnUpdate:s(i)}),{default:k(()=>[(R(),me(Rt(x.value),{formHooks:c.formHooks},null,8,["formHooks"]))]),_:1},16,["onOnCreate","onOnUpdate"])]))}},pa=["gregorian","persian"],ut={mask:{type:String},locale:Object,calendar:{type:String,validator:a=>pa.includes(a),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Ca=["update:modelValue"];function z(a){return a.year+"/"+X(a.month)+"/"+X(a.day)}function ka(a,C){const c=h(()=>a.disable!==!0&&a.readonly!==!0),f=h(()=>c.value===!0?0:-1),g=h(()=>{const x=[];return a.color!==void 0&&x.push(`bg-${a.color}`),a.textColor!==void 0&&x.push(`text-${a.textColor}`),x.join(" ")});function D(){return a.locale!==void 0?{...C.lang.date,...a.locale}:C.lang.date}function V(x){const M=new Date,i=x===!0?null:0;if(a.calendar==="persian"){const b=At(M);return{year:b.jy,month:b.jm,day:b.jd}}return{year:M.getFullYear(),month:M.getMonth()+1,day:M.getDate(),hour:i,minute:i,second:i,millisecond:i}}return{editable:c,tabindex:f,headerClass:g,getLocale:D,getCurrentDate:V}}const G=20,Va=["Calendar","Years","Months"],it=a=>Va.includes(a),je=a=>/^-?[\d]+\/[0-1]\d$/.test(a),oe=" \u2014 ";function K(a){return a.year+"/"+X(a.month)}var dt=Bt({name:"QDate",props:{...ut,...Et,...Ut,modelValue:{required:!0,validator:a=>typeof a=="string"||Array.isArray(a)===!0||Object(a)===a||a===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...ut.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:je},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:je},navigationMaxYearMonth:{type:String,validator:je},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:it}},emits:[...Ca,"rangeStart","rangeEnd","navigation"],setup(a,{slots:C,emit:c}){const{proxy:f}=Lt(),{$q:g}=f,D=zt(a,g),{getCache:V}=da(),{tabindex:x,headerClass:M,getLocale:i,getCurrentDate:b}=ka(a,g);let Q;const B=Kt(a),E=Jt(B),q=Y(null),_=Y(Ue()),m=Y(i()),S=h(()=>Ue()),I=h(()=>i()),O=h(()=>b()),u=Y(Le(_.value,m.value)),H=Y(a.defaultView),U=h(()=>g.lang.rtl===!0?"right":"left"),ve=Y(U.value),Ce=Y(U.value),ke=u.value.year,fe=Y(ke-ke%G-(ke<0?G:0)),j=Y(null),kt=h(()=>{const e=a.landscape===!0?"landscape":"portrait";return`q-date q-date--${e} q-date--${e}-${a.minimal===!0?"minimal":"standard"}`+(D.value===!0?" q-date--dark q-dark":"")+(a.bordered===!0?" q-date--bordered":"")+(a.square===!0?" q-date--square no-border-radius":"")+(a.flat===!0?" q-date--flat no-shadow":"")+(a.disable===!0?" disabled":a.readonly===!0?" q-date--readonly":"")}),W=h(()=>a.color||"primary"),ee=h(()=>a.textColor||"white"),ye=h(()=>a.emitImmediately===!0&&a.multiple!==!0&&a.range!==!0),Ve=h(()=>Array.isArray(a.modelValue)===!0?a.modelValue:a.modelValue!==null&&a.modelValue!==void 0?[a.modelValue]:[]),N=h(()=>Ve.value.filter(e=>typeof e=="string").map(e=>He(e,_.value,m.value)).filter(e=>e.dateHash!==null&&e.day!==null&&e.month!==null&&e.year!==null)),te=h(()=>{const e=t=>He(t,_.value,m.value);return Ve.value.filter(t=>Zt(t)===!0&&t.from!==void 0&&t.to!==void 0).map(t=>({from:e(t.from),to:e(t.to)})).filter(t=>t.from.dateHash!==null&&t.to.dateHash!==null&&t.from.dateHash<t.to.dateHash)}),he=h(()=>a.calendar!=="persian"?e=>new Date(e.year,e.month-1,e.day):e=>{const t=Xe(e.year,e.month,e.day);return new Date(t.gy,t.gm-1,t.gd)}),xe=h(()=>a.calendar==="persian"?z:(e,t,l)=>Xt(new Date(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond),t===void 0?_.value:t,l===void 0?m.value:l,e.year,e.timezoneOffset)),re=h(()=>N.value.length+te.value.reduce((e,t)=>e+1+ea(he.value(t.to),he.value(t.from)),0)),Ne=h(()=>{if(a.title!==void 0&&a.title!==null&&a.title.length!==0)return a.title;if(j.value!==null){const l=j.value.init,o=he.value(l);return m.value.daysShort[o.getDay()]+", "+m.value.monthsShort[l.month-1]+" "+l.day+oe+"?"}if(re.value===0)return oe;if(re.value>1)return`${re.value} ${m.value.pluralDay}`;const e=N.value[0],t=he.value(e);return isNaN(t.valueOf())===!0?oe:m.value.headerTitle!==void 0?m.value.headerTitle(t,e):m.value.daysShort[t.getDay()]+", "+m.value.monthsShort[e.month-1]+" "+e.day}),Vt=h(()=>N.value.concat(te.value.map(t=>t.from)).sort((t,l)=>t.year-l.year||t.month-l.month)[0]),xt=h(()=>N.value.concat(te.value.map(t=>t.to)).sort((t,l)=>l.year-t.year||l.month-t.month)[0]),Pe=h(()=>{if(a.subtitle!==void 0&&a.subtitle!==null&&a.subtitle.length!==0)return a.subtitle;if(re.value===0)return oe;if(re.value>1){const e=Vt.value,t=xt.value,l=m.value.monthsShort;return l[e.month-1]+(e.year!==t.year?" "+e.year+oe+l[t.month-1]+" ":e.month!==t.month?oe+l[t.month-1]:"")+" "+t.year}return N.value[0].year}),ge=h(()=>{const e=[g.iconSet.datetime.arrowLeft,g.iconSet.datetime.arrowRight];return g.lang.rtl===!0?e.reverse():e}),Re=h(()=>a.firstDayOfWeek!==void 0?Number(a.firstDayOfWeek):m.value.firstDayOfWeek),wt=h(()=>{const e=m.value.daysShort,t=Re.value;return t>0?e.slice(t,7).concat(e.slice(0,t)):e}),L=h(()=>{const e=u.value;return a.calendar!=="persian"?new Date(e.year,e.month,0).getDate():Te(e.year,e.month)}),Dt=h(()=>typeof a.eventColor=="function"?a.eventColor:()=>a.eventColor),T=h(()=>{if(a.navigationMinYearMonth===void 0)return null;const e=a.navigationMinYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),F=h(()=>{if(a.navigationMaxYearMonth===void 0)return null;const e=a.navigationMaxYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),we=h(()=>{const e={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return T.value!==null&&T.value.year>=u.value.year&&(e.year.prev=!1,T.value.year===u.value.year&&T.value.month>=u.value.month&&(e.month.prev=!1)),F.value!==null&&F.value.year<=u.value.year&&(e.year.next=!1,F.value.year===u.value.year&&F.value.month<=u.value.month&&(e.month.next=!1)),e}),_e=h(()=>{const e={};return N.value.forEach(t=>{const l=K(t);e[l]===void 0&&(e[l]=[]),e[l].push(t.day)}),e}),Ae=h(()=>{const e={};return te.value.forEach(t=>{const l=K(t.from),o=K(t.to);if(e[l]===void 0&&(e[l]=[]),e[l].push({from:t.from.day,to:l===o?t.to.day:void 0,range:t}),l<o){let n;const{year:p,month:r}=t.from,y=r<12?{year:p,month:r+1}:{year:p+1,month:1};for(;(n=K(y))<=o;)e[n]===void 0&&(e[n]=[]),e[n].push({from:void 0,to:n===o?t.to.day:void 0,range:t}),y.month++,y.month>12&&(y.year++,y.month=1)}}),e}),se=h(()=>{if(j.value===null)return;const{init:e,initHash:t,final:l,finalHash:o}=j.value,[n,p]=t<=o?[e,l]:[l,e],r=K(n),y=K(p);if(r!==$.value&&y!==$.value)return;const w={};return r===$.value?(w.from=n.day,w.includeFrom=!0):w.from=1,y===$.value?(w.to=p.day,w.includeTo=!0):w.to=L.value,w}),$=h(()=>K(u.value)),Ht=h(()=>{const e={};if(a.options===void 0){for(let l=1;l<=L.value;l++)e[l]=!0;return e}const t=typeof a.options=="function"?a.options:l=>a.options.includes(l);for(let l=1;l<=L.value;l++){const o=$.value+"/"+X(l);e[l]=t(o)}return e}),Mt=h(()=>{const e={};if(a.events===void 0)for(let t=1;t<=L.value;t++)e[t]=!1;else{const t=typeof a.events=="function"?a.events:l=>a.events.includes(l);for(let l=1;l<=L.value;l++){const o=$.value+"/"+X(l);e[l]=t(o)===!0&&Dt.value(o)}}return e}),qt=h(()=>{let e,t;const{year:l,month:o}=u.value;if(a.calendar!=="persian")e=new Date(l,o-1,1),t=new Date(l,o-1,0).getDate();else{const n=Xe(l,o,1);e=new Date(n.gy,n.gm-1,n.gd);let p=o-1,r=l;p===0&&(p=12,r--),t=Te(r,p)}return{days:e.getDay()-Re.value-1,endDay:t}}),Be=h(()=>{const e=[],{days:t,endDay:l}=qt.value,o=t<0?t+7:t;if(o<6)for(let r=l-o;r<=l;r++)e.push({i:r,fill:!0});const n=e.length;for(let r=1;r<=L.value;r++){const y={i:r,event:Mt.value[r],classes:[]};Ht.value[r]===!0&&(y.in=!0,y.flat=!0),e.push(y)}if(_e.value[$.value]!==void 0&&_e.value[$.value].forEach(r=>{const y=n+r-1;Object.assign(e[y],{selected:!0,unelevated:!0,flat:!1,color:W.value,textColor:ee.value})}),Ae.value[$.value]!==void 0&&Ae.value[$.value].forEach(r=>{if(r.from!==void 0){const y=n+r.from-1,w=n+(r.to||L.value)-1;for(let ue=y;ue<=w;ue++)Object.assign(e[ue],{range:r.range,unelevated:!0,color:W.value,textColor:ee.value});Object.assign(e[y],{rangeFrom:!0,flat:!1}),r.to!==void 0&&Object.assign(e[w],{rangeTo:!0,flat:!1})}else if(r.to!==void 0){const y=n+r.to-1;for(let w=n;w<=y;w++)Object.assign(e[w],{range:r.range,unelevated:!0,color:W.value,textColor:ee.value});Object.assign(e[y],{flat:!1,rangeTo:!0})}else{const y=n+L.value-1;for(let w=n;w<=y;w++)Object.assign(e[w],{range:r.range,unelevated:!0,color:W.value,textColor:ee.value})}}),se.value!==void 0){const r=n+se.value.from-1,y=n+se.value.to-1;for(let w=r;w<=y;w++)e[w].color=W.value,e[w].editRange=!0;se.value.includeFrom===!0&&(e[r].editRangeFrom=!0),se.value.includeTo===!0&&(e[y].editRangeTo=!0)}u.value.year===O.value.year&&u.value.month===O.value.month&&(e[n+O.value.day-1].today=!0);const p=e.length%7;if(p>0){const r=7-p;for(let y=1;y<=r;y++)e.push({i:y,fill:!0})}return e.forEach(r=>{let y="q-date__calendar-item ";r.fill===!0?y+="q-date__calendar-item--fill":(y+=`q-date__calendar-item--${r.in===!0?"in":"out"}`,r.range!==void 0&&(y+=` q-date__range${r.rangeTo===!0?"-to":r.rangeFrom===!0?"-from":""}`),r.editRange===!0&&(y+=` q-date__edit-range${r.editRangeFrom===!0?"-from":""}${r.editRangeTo===!0?"-to":""}`),(r.range!==void 0||r.editRange===!0)&&(y+=` text-${r.color}`)),r.classes=y}),e}),St=h(()=>a.disable===!0?{"aria-disabled":"true"}:{});ie(()=>a.modelValue,e=>{if(Q===e)Q=0;else{const t=Le(_.value,m.value);ae(t.year,t.month,t)}}),ie(H,()=>{q.value!==null&&f.$el.contains(document.activeElement)===!0&&q.value.focus()}),ie(()=>u.value.year+"|"+u.value.month,()=>{c("navigation",{year:u.value.year,month:u.value.month})}),ie(S,e=>{Ge(e,m.value,"mask"),_.value=e}),ie(I,e=>{Ge(_.value,e,"locale"),m.value=e});function Ee(){const{year:e,month:t,day:l}=O.value,o={...u.value,year:e,month:t,day:l},n=_e.value[K(o)];(n===void 0||n.includes(o.day)===!1)&&qe(o),De(o.year,o.month)}function Ot(e){it(e)===!0&&(H.value=e)}function Tt(e,t){["month","year"].includes(e)&&(e==="month"?Ke:Me)(t===!0?-1:1)}function De(e,t){H.value="Calendar",ae(e,t)}function Ft(e,t){if(a.range===!1||!e){j.value=null;return}const l=Object.assign({...u.value},e),o=t!==void 0?Object.assign({...u.value},t):l;j.value={init:l,initHash:z(l),final:o,finalHash:z(o)},De(l.year,l.month)}function Ue(){return a.calendar==="persian"?"YYYY/MM/DD":a.mask}function He(e,t,l){return Gt(e,t,l,a.calendar,{hour:0,minute:0,second:0,millisecond:0})}function Le(e,t){const l=Array.isArray(a.modelValue)===!0?a.modelValue:a.modelValue?[a.modelValue]:[];if(l.length===0)return ze();const o=l[l.length-1],n=He(o.from!==void 0?o.from:o,e,t);return n.dateHash===null?ze():n}function ze(){let e,t;if(a.defaultYearMonth!==void 0){const l=a.defaultYearMonth.split("/");e=parseInt(l[0],10),t=parseInt(l[1],10)}else{const l=O.value!==void 0?O.value:b();e=l.year,t=l.month}return{year:e,month:t,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:e+"/"+X(t)+"/01"}}function Ke(e){let t=u.value.year,l=Number(u.value.month)+e;l===13?(l=1,t++):l===0&&(l=12,t--),ae(t,l),ye.value===!0&&be("month")}function Me(e){const t=Number(u.value.year)+e;ae(t,u.value.month),ye.value===!0&&be("year")}function It(e){ae(e,u.value.month),H.value=a.defaultView==="Years"?"Months":"Calendar",ye.value===!0&&be("year")}function jt(e){ae(u.value.year,e),H.value="Calendar",ye.value===!0&&be("month")}function Yt(e,t){const l=_e.value[t];(l!==void 0&&l.includes(e.day)===!0?Se:qe)(e)}function J(e){return{year:e.year,month:e.month,day:e.day}}function ae(e,t,l){if(T.value!==null&&e<=T.value.year&&((t<T.value.month||e<T.value.year)&&(t=T.value.month),e=T.value.year),F.value!==null&&e>=F.value.year&&((t>F.value.month||e>F.value.year)&&(t=F.value.month),e=F.value.year),l!==void 0){const{hour:n,minute:p,second:r,millisecond:y,timezoneOffset:w,timeHash:ue}=l;Object.assign(u.value,{hour:n,minute:p,second:r,millisecond:y,timezoneOffset:w,timeHash:ue})}const o=e+"/"+X(t)+"/01";o!==u.value.dateHash&&(ve.value=u.value.dateHash<o==(g.lang.rtl!==!0)?"left":"right",e!==u.value.year&&(Ce.value=ve.value),Ze(()=>{fe.value=e-e%G-(e<0?G:0),Object.assign(u.value,{year:e,month:t,day:1,dateHash:o})}))}function We(e,t,l){const o=e!==null&&e.length===1&&a.multiple===!1?e[0]:e;Q=o;const{reason:n,details:p}=Je(t,l);c("update:modelValue",o,n,p)}function be(e){const t=N.value[0]!==void 0&&N.value[0].dateHash!==null?{...N.value[0]}:{...u.value};Ze(()=>{t.year=u.value.year,t.month=u.value.month;const l=a.calendar!=="persian"?new Date(t.year,t.month,0).getDate():Te(t.year,t.month);t.day=Math.min(Math.max(1,t.day),l);const o=le(t);Q=o;const{details:n}=Je("",t);c("update:modelValue",o,e,n)})}function Je(e,t){return t.from!==void 0?{reason:`${e}-range`,details:{...J(t.target),from:J(t.from),to:J(t.to)}}:{reason:`${e}-day`,details:J(t)}}function le(e,t,l){return e.from!==void 0?{from:xe.value(e.from,t,l),to:xe.value(e.to,t,l)}:xe.value(e,t,l)}function qe(e){let t;if(a.multiple===!0)if(e.from!==void 0){const l=z(e.from),o=z(e.to),n=N.value.filter(r=>r.dateHash<l||r.dateHash>o),p=te.value.filter(({from:r,to:y})=>y.dateHash<l||r.dateHash>o);t=n.concat(p).concat(e).map(r=>le(r))}else{const l=Ve.value.slice();l.push(le(e)),t=l}else t=le(e);We(t,"add",e)}function Se(e){if(a.noUnset===!0)return;let t=null;if(a.multiple===!0&&Array.isArray(a.modelValue)===!0){const l=le(e);e.from!==void 0?t=a.modelValue.filter(o=>o.from!==void 0?o.from!==l.from&&o.to!==l.to:!0):t=a.modelValue.filter(o=>o!==l),t.length===0&&(t=null)}We(t,"remove",e)}function Ge(e,t,l){const o=N.value.concat(te.value).map(n=>le(n,e,t)).filter(n=>n.from!==void 0?n.from.dateHash!==null&&n.to.dateHash!==null:n.dateHash!==null);c("update:modelValue",(a.multiple===!0?o:o[0])||null,l)}function Qt(){if(a.minimal!==!0)return d("div",{class:"q-date__header "+M.value},[d("div",{class:"relative-position"},[d(de,{name:"q-transition--fade"},()=>d("div",{key:"h-yr-"+Pe.value,class:"q-date__header-subtitle q-date__header-link "+(H.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:x.value,...V("vY",{onClick(){H.value="Years"},onKeyup(e){e.keyCode===13&&(H.value="Years")}})},[Pe.value]))]),d("div",{class:"q-date__header-title relative-position flex no-wrap"},[d("div",{class:"relative-position col"},[d(de,{name:"q-transition--fade"},()=>d("div",{key:"h-sub"+Ne.value,class:"q-date__header-title-label q-date__header-link "+(H.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:x.value,...V("vC",{onClick(){H.value="Calendar"},onKeyup(e){e.keyCode===13&&(H.value="Calendar")}})},[Ne.value]))]),a.todayBtn===!0?d(P,{class:"q-date__header-today self-start",icon:g.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:x.value,onClick:Ee}):null])])}function Oe({label:e,type:t,key:l,dir:o,goTo:n,boundaries:p,cls:r}){return[d("div",{class:"row items-center q-date__arrow"},[d(P,{round:!0,dense:!0,size:"sm",flat:!0,icon:ge.value[0],tabindex:x.value,disable:p.prev===!1,...V("go-#"+t,{onClick(){n(-1)}})})]),d("div",{class:"relative-position overflow-hidden flex flex-center"+r},[d(de,{name:"q-transition--jump-"+o},()=>d("div",{key:l},[d(P,{flat:!0,dense:!0,noCaps:!0,label:e,tabindex:x.value,...V("view#"+t,{onClick:()=>{H.value=t}})})]))]),d("div",{class:"row items-center q-date__arrow"},[d(P,{round:!0,dense:!0,size:"sm",flat:!0,icon:ge.value[1],tabindex:x.value,disable:p.next===!1,...V("go+#"+t,{onClick(){n(1)}})})])]}const $t={Calendar:()=>[d("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[d("div",{class:"q-date__navigation row items-center no-wrap"},Oe({label:m.value.months[u.value.month-1],type:"Months",key:u.value.month,dir:ve.value,goTo:Ke,boundaries:we.value.month,cls:" col"}).concat(Oe({label:u.value.year,type:"Years",key:u.value.year,dir:Ce.value,goTo:Me,boundaries:we.value.year,cls:""}))),d("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},wt.value.map(e=>d("div",{class:"q-date__calendar-item"},[d("div",e)]))),d("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[d(de,{name:"q-transition--slide-"+ve.value},()=>d("div",{key:$.value,class:"q-date__calendar-days fit"},Be.value.map(e=>d("div",{class:e.classes},[e.in===!0?d(P,{class:e.today===!0?"q-date__today":"",dense:!0,flat:e.flat,unelevated:e.unelevated,color:e.color,textColor:e.textColor,label:e.i,tabindex:x.value,...V("day#"+e.i,{onClick:()=>{Nt(e.i)},onMouseover:()=>{Pt(e.i)}})},e.event!==!1?()=>d("div",{class:"q-date__event bg-"+e.event}):null):d("div",""+e.i)]))))])])],Months(){const e=u.value.year===O.value.year,t=o=>T.value!==null&&u.value.year===T.value.year&&T.value.month>o||F.value!==null&&u.value.year===F.value.year&&F.value.month<o,l=m.value.monthsShort.map((o,n)=>{const p=u.value.month===n+1;return d("div",{class:"q-date__months-item flex flex-center"},[d(P,{class:e===!0&&O.value.month===n+1?"q-date__today":null,flat:p!==!0,label:o,unelevated:p,color:p===!0?W.value:null,textColor:p===!0?ee.value:null,tabindex:x.value,disable:t(n+1),...V("month#"+n,{onClick:()=>{jt(n+1)}})})])});return a.yearsInMonthView===!0&&l.unshift(d("div",{class:"row no-wrap full-width"},[Oe({label:u.value.year,type:"Years",key:u.value.year,dir:Ce.value,goTo:Me,boundaries:we.value.year,cls:" col"})])),d("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},l)},Years(){const e=fe.value,t=e+G,l=[],o=n=>T.value!==null&&T.value.year>n||F.value!==null&&F.value.year<n;for(let n=e;n<=t;n++){const p=u.value.year===n;l.push(d("div",{class:"q-date__years-item flex flex-center"},[d(P,{key:"yr"+n,class:O.value.year===n?"q-date__today":null,flat:!p,label:n,dense:!0,unelevated:p,color:p===!0?W.value:null,textColor:p===!0?ee.value:null,tabindex:x.value,disable:o(n),...V("yr#"+n,{onClick:()=>{It(n)}})})]))}return d("div",{class:"q-date__view q-date__years flex flex-center"},[d("div",{class:"col-auto"},[d(P,{round:!0,dense:!0,flat:!0,icon:ge.value[0],tabindex:x.value,disable:o(e),...V("y-",{onClick:()=>{fe.value-=G}})})]),d("div",{class:"q-date__years-content col self-stretch row items-center"},l),d("div",{class:"col-auto"},[d(P,{round:!0,dense:!0,flat:!0,icon:ge.value[1],tabindex:x.value,disable:o(t),...V("y+",{onClick:()=>{fe.value+=G}})})])])}};function Nt(e){const t={...u.value,day:e};if(a.range===!1){Yt(t,$.value);return}if(j.value===null){const l=Be.value.find(n=>n.fill!==!0&&n.i===e);if(a.noUnset!==!0&&l.range!==void 0){Se({target:t,from:l.range.from,to:l.range.to});return}if(l.selected===!0){Se(t);return}const o=z(t);j.value={init:t,initHash:o,final:t,finalHash:o},c("rangeStart",J(t))}else{const l=j.value.initHash,o=z(t),n=l<=o?{from:j.value.init,to:t}:{from:t,to:j.value.init};j.value=null,qe(l===o?t:{target:t,...n}),c("rangeEnd",{from:J(n.from),to:J(n.to)})}}function Pt(e){if(j.value!==null){const t={...u.value,day:e};Object.assign(j.value,{final:t,finalHash:z(t)})}}return Object.assign(f,{setToday:Ee,setView:Ot,offsetCalendar:Tt,setCalendarTo:De,setEditingRange:Ft}),()=>{const e=[d("div",{class:"q-date__content col relative-position"},[d(de,{name:"q-transition--fade"},$t[H.value])])],t=Wt(C.default);return t!==void 0&&e.push(d("div",{class:"q-date__actions"},t)),a.name!==void 0&&a.disable!==!0&&E(e,"push"),d("div",{class:kt.value,...St.value},[Qt(),d("div",{ref:q,class:"q-date__main col column",tabindex:-1},e)])}}});function xa(){return ta(aa)}var wa=(a,C)=>{const c=a.__vccOpts||a;for(const[f,g]of C)c[f]=g;return c};const pt=a=>(ra("data-v-ce683a9a"),a=a(),sa(),a),Da={class:"header"},Ha={class:"text-h5 q-pa-sm text-bold"},Ma={key:0},qa={key:1},Sa=pt(()=>A("div",{class:"comment-header"},[A("div")],-1)),Oa={class:"comment-text"},Ta={class:"comment-actions"},Fa={class:"comment-input"},Ia=pt(()=>A("span",{class:"text-primary"},"Processing ...",-1)),ja={__name:"CommentTemplate",props:{id:Number,type:String},setup(a){xa();const C=Y("");Y([]);const c=Y(null),f=Y(""),g=a,D=Qe({title:"Comment",url:"custom-apps/comments"});D.hooksCycle.params.resolvedParams=S=>(S.params["filter[resource_id]"]=g.id,S.params["filter[resource_type]"]=g.type,S);const V=$e({title:"Comment",url:"custom-apps/comments",initialValues:{comment:""}}),{resetFetch:x,refresh:M,tableData:i,actions:b,loading:Q}=D;b.pagination.update({rowsPerPage:20,descending:!1}),V.hooksCycle.afterResolve=S=>(S.resource_id=g.id,S.resource_type=g.type,S);function B(){V.actions.form.create,V.formData.value={comment:C.value},V.onCreate({emit:S=>{M(),C.value=""}})}function E(S,I){V.actions.formData.update({comment:f.value}),V.onUpdate({id:I,emit:O=>{M(),c.value=null,f.value=""}})}function q(S){D.deleteRecord(S)}function _(){c.value=null,f.value=""}const m=(S,I)=>{c.value=S,f.value=I};return Ye(()=>{M()}),(S,I)=>(R(),me(ft,{class:"q-pa-sm q-gutter-md"},{default:k(()=>[A("div",Da,[v(ya,null,{default:k(()=>[A("span",Ha,"Comments ("+et(s(i).length)+")",1)]),_:1})]),v(vt),v(ha,{class:"q-mb-md"},{default:k(()=>[(R(!0),ne(la,null,oa(s(i),({comment:O,id:u},H)=>(R(),me(_t,{key:H,class:"comment-bubble"},{default:k(()=>[v(bt,null,{default:k(()=>[c.value===H?(R(),ne("div",Ma,[v(ce,{modelValue:f.value,"onUpdate:modelValue":I[1]||(I[1]=U=>f.value=U),placeholder:"Add a comment...",outlined:"",onKeyup:Fe(U=>E(H,u),["enter"]),dense:""},{append:k(()=>[v(Z,{name:"clear",class:"cursor-pointer",onClick:I[0]||(I[0]=U=>_())}),v(Z,{name:"save",class:"cursor-pointer text-blue",onClick:U=>E(H,u)},null,8,["onClick"])]),_:2},1032,["modelValue","onKeyup"])])):(R(),ne("div",qa,[Sa,A("div",Oa,et(O),1),A("div",Ta,[v(Z,{name:"edit",class:"cursor-pointer",onClick:U=>m(H,O)},null,8,["onClick"]),v(Z,{name:"delete",class:"cursor-pointer text-red",onClick:U=>q(u)},null,8,["onClick"])])]))]),_:2},1024)]),_:2},1024))),128))]),_:1}),A("div",Fa,[v(ce,{modelValue:C.value,"onUpdate:modelValue":I[2]||(I[2]=O=>C.value=O),placeholder:"Add a comment...",outlined:"",onKeydown:[Fe(tt(B,["exact","prevent"]),["enter"]),I[3]||(I[3]=Fe(tt(O=>C.value+=`
`,["shift","exact","prevent"]),["enter"]))],dense:"",type:"textarea"},{append:k(()=>[v(Z,{name:"send",class:"cursor-pointer text-blue",onClick:B})]),_:1},8,["modelValue","onKeydown"])]),v(ia,{showing:s(Q)},{default:k(()=>[v(na,{size:"3em",thickness:2,color:"primary"}),Ia]),_:1},8,["showing"])]),_:1}))}};var Ya=wa(ja,[["__scopeId","data-v-ce683a9a"]]);const Qa={class:"row items-center justify-end"},$a={class:"row items-center justify-end"},Ct={__name:"TaskFormTemplate",props:{formHooks:Object,hide:{type:Array,default:()=>[]}},setup(a){const{formHooks:C,hide:c}=a,{formData:f,formReadonly:g,formError:D,hooksCycle:V,actions:x}=C,M=[{label:"To do",value:"to-do"},{label:"In Progress",value:"in-progress"},{label:"Need Review",value:"need-review"},{label:"Complete",value:"complete"}],i=[{label:"Urgent",value:"urgent"},{label:"High",value:"high"},{label:"Normal",value:"normal"},{label:"Low",value:"low"}],b=ga({url:"custom-apps/milestones",map:q=>({label:q.title,value:q.id})});function Q(q){return c.includes("milestone")||q.milestone&&(q.milestone_id=q.milestone.value),q}const B=V.afterResolve;V.afterResolve=q=>Q(B(q));const E=Y("comment");return(q,_)=>(R(),ne("div",null,[v(fa,{class:"q-gutter-md q-mt-xs"},{default:k(()=>[v(ce,{modelValue:s(f).name,"onUpdate:modelValue":_[0]||(_[0]=m=>s(f).name=m),filled:"",label:"Name *",outlined:"","hide-bottom-space":"",dense:"",readonly:s(g),"error-message":s(D).name,error:s(D).name!==void 0},null,8,["modelValue","readonly","error-message","error"]),v(ca,{modelValue:s(f).description,"onUpdate:modelValue":_[1]||(_[1]=m=>s(f).description=m),"min-height":"5rem",readonly:s(g)},null,8,["modelValue","readonly"]),v(Ie,{modelValue:s(f).status,"onUpdate:modelValue":_[2]||(_[2]=m=>s(f).status=m),"error-message":s(D).status,error:s(D).status!==void 0,filled:"","hide-bottom-space":"",dense:"",options:M,label:"Status",readonly:s(g)},null,8,["modelValue","error-message","error","readonly"]),v(ce,{filled:"",modelValue:s(f).start_date,"onUpdate:modelValue":_[4]||(_[4]=m=>s(f).start_date=m),mask:"date","hide-bottom-space":"",dense:"",label:"Start Date",rules:["date"],readonly:s(g)},{append:k(()=>[v(Z,{name:"event",class:"cursor-pointer"},{default:k(()=>[v(nt,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:k(()=>[v(dt,{modelValue:s(f).start_date,"onUpdate:modelValue":_[3]||(_[3]=m=>s(f).start_date=m)},{default:k(()=>[A("div",Qa,[at(v(P,{label:"Close",color:"primary",flat:""},null,512),[[ot]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","readonly"]),v(ce,{filled:"","hide-bottom-space":"",dense:"",modelValue:s(f).due_date,"onUpdate:modelValue":_[6]||(_[6]=m=>s(f).due_date=m),mask:"date",label:"Due Date",rules:["date"],readonly:s(g)},{append:k(()=>[v(Z,{name:"event",class:"cursor-pointer"},{default:k(()=>[v(nt,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:k(()=>[v(dt,{modelValue:s(f).due_date,"onUpdate:modelValue":_[5]||(_[5]=m=>s(f).due_date=m)},{default:k(()=>[A("div",$a,[at(v(P,{label:"Close",color:"primary",flat:""},null,512),[[ot]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","readonly"]),v(Ie,{modelValue:s(f).priority,"onUpdate:modelValue":_[7]||(_[7]=m=>s(f).priority=m),"error-message":s(D).priority,error:s(D).priority!==void 0,filled:"","hide-bottom-space":"",dense:"",options:i,label:"Priority",readonly:s(g)},null,8,["modelValue","error-message","error","readonly"]),a.hide.includes("milestone")?lt("",!0):(R(),me(Ie,{key:0,filled:"","use-input":"",dense:"","hide-bottom-space":"",modelValue:s(f).milestone,"onUpdate:modelValue":_[8]||(_[8]=m=>s(f).milestone=m),"error-message":s(D).milestone,error:s(D).milestone!==void 0,label:"Milestone","input-debounce":"1000",options:s(b).options.value,onFilter:s(b).filterFn,onFilterAbort:s(b).abortFilterFn,readonly:s(g)},{"no-option":k(()=>[v(_t,null,{default:k(()=>[v(bt,{class:"text-grey"},{default:k(()=>[ua(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","error-message","error","options","onFilter","onFilterAbort","readonly"])),v(_a,{modelValue:s(f).tags,"onUpdate:modelValue":_[9]||(_[9]=m=>s(f).tags=m),modelModifiers:{value:!0},resource:"tasks",label:"tags",readonly:s(g),error:s(D).tags},null,8,["modelValue","readonly","error"]),s(x).formMode.isShow()||s(x).formMode.isUpdate()?(R(),me(ft,{key:1},{default:k(()=>[v(va,{modelValue:E.value,"onUpdate:modelValue":_[10]||(_[10]=m=>E.value=m),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:k(()=>[v(st,{name:"comment",label:"Comment"}),v(st,{name:"note",label:"Note"})]),_:1},8,["modelValue"]),v(vt),v(ma,{modelValue:E.value,"onUpdate:modelValue":_[11]||(_[11]=m=>E.value=m),animated:""},{default:k(()=>[v(rt,{name:"comment"},{default:k(()=>[v(Ya,{id:s(f).id,type:"tasks"},null,8,["id"])]),_:1}),v(rt,{name:"note"},{default:k(()=>[v(ba,{id:s(f).id,type:"tasks"},null,8,["id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):lt("",!0)]),_:1})]))}};var Na=Object.freeze(Object.defineProperty({__proto__:null,default:Ct},Symbol.toStringTag,{value:"Module"}));const Za={__name:"TaskIndexTemplate",props:{id:Number,type:String,isCustom:{type:Boolean,default:!1},hide:{type:Array,default:()=>[]},custom:Object,tabsConfig:Object},setup(a){const C=a,c={title:"Task",url:"custom-apps/tasks",columns:[{name:"name",align:"left",label:"Name",field:"name",sortable:!0},{name:"description",align:"left",label:"Description",field:"description",sortable:!1,format:i=>i&&i.length>15?i.substring(0,15)+"...":i},{name:"status",align:"left",label:"Status",field:"status",sortable:!0,format:i=>i==null?void 0:i.label},{name:"due_date",align:"left",label:"Due Date",field:"due_date",sortable:!0},{name:"priority",align:"left",label:"Priority",field:"priority",sortable:!0,format:i=>i==null?void 0:i.label},{name:"tags",align:"left",label:"Tags",field:"tags",type:"tags",sortable:!0},{name:"created_at",align:"left",label:"Created at",field:"created_at",sortable:!0}],formInitialValues:{name:"",label:"",description:""},tabsConfig:C.tabsConfig,template:()=>ct(()=>mt(()=>Promise.resolve().then(function(){return Na}),void 0))},f=gt(),g=Qe({title:c.title,url:c.url});g.hooksCycle.params.resolvedParams=i=>{var b;return C.isCustom?i.params={...i.params,...(b=C.custom.params)!=null?b:{}}:(i.params["filter[resource_id]"]=C.id,i.params["filter[resource_type]"]=C.type),i};const D=$e({title:c.title,url:c.url,initialValues:c.formInitialValues});D.hooksCycle.afterResolve=i=>{var b,Q,B;return C.isCustom?i=(B=(Q=(b=C.custom).resolvedFields)==null?void 0:Q.call(b,i))!=null?B:i:(i.resource_id=C.id,i.resource_type=C.type),i},D.hooksCycle.beforeOpenForm=i=>(i.description=i.description?i.description:"",i),c.formHandleHooks=f,c.formHooks=D,c.indexHooks=g;const{form:V}=f;h(()=>c.template());const{resetFetch:x,refresh:M}=g;return Ye(()=>{M()}),(i,b)=>(R(),ne("div",null,[v(yt,pe(c,{bodyClass:"q-pa-sm"}),null,16),v(ht,pe({formStyle:"width: 600px; max-width:90vw;",ref_key:"form",ref:V},c,{onOnCreate:s(x),onOnUpdate:s(M)}),{default:k(()=>[v(Ct,{formHooks:c.formHooks,hide:a.hide},null,8,["formHooks","hide"])]),_:1},16,["onOnCreate","onOnUpdate"])]))}};export{dt as Q,ba as _,Za as a};
