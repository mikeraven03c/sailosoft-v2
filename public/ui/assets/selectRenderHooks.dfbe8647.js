import{r as v,aO as F}from"./index.d510ed45.js";const b=10;function P({url:m="",map:d=s=>({label:s.name,value:s.id}),filters:c=""}){const s=v([]),n={},i={resolvedParams:e=>e},l={addFilter(e,r){n[e]=r},addFilterAction(e){return e(l),p}};function f(e=""){const r={params:{search:e,per_page:b}};if(c&&c.split("&").reduce((a,o)=>{const[t,h]=o.split("=");return a[t]=decodeURIComponent(h),r.params[t]=a[t],a},{}),n)for(const[a,o]of Object.entries(n))r.params[`filter[${a}]`]=o;return r}function u(e="",r=()=>{},a=()=>{}){const o=i.resolvedParams(f(e));F.get(m,o).then(({data:t})=>{r(t)}).catch(t=>{console.error(t)})}const p={actions:l,hooks:i,options:s,filterFn(e,r,a){u(e,o=>{r(()=>{if(o.data){const t=o.data.map(d);s.value=t}})})},abortFilter(){}};return p}export{P as s};
