import{bp as O,t as Z,r as D,V as s,Y as d,$ as l,X as n,a7 as e,W as P,S as A,bm as M,a0 as T,a1 as z,aT as f,aZ as X,Q as Y,Z as _,_ as Q}from"./index.d510ed45.js";import{Q as U,b as C}from"./QMenu.e66367a1.js";import{Q as V}from"./QSelect.3cee18ec.js";import{c as G,Q as H}from"./QTabs.bab11733.js";import{a as I,Q as E,_ as L}from"./FormModal.bf50ce24.js";import{Q as J,a as S}from"./QPopupProxy.48b18346.js";import{Q as K}from"./QForm.75657b46.js";import{s as w}from"./selectRenderHooks.dfbe8647.js";import{H as R}from"./HandleFormShow.d5e34568.js";import{_ as h}from"./OrganizationFormTemplate.13555752.js";import ee from"./ContactFormTemplate.997efc3d.js";import{_ as oe,a as le}from"./TaskIndexTemplate.2d015257.js";import{_ as ae}from"./TagComponent.ebd5106e.js";import"./QResizeObserver.076847df.js";import"./QSpace.6f68aa3e.js";import"./QTooltip.c04ed348.js";import"./ResourceForm.affcb3a8.js";import"./QList.74fe262e.js";import"./QToolbar.dc0fe3a3.js";const te={key:0,class:"q-ma-xl"},re={key:1,class:"q-gutter-md q-mt-xs"},ne={key:0,class:"q-ma-xl"},ie={key:1,class:"q-gutter-md q-mt-xs"},He={__name:"LeadFormTemplate",props:{formHooks:Object},setup(B){const{formHooks:j}=B,{formData:r,formReadonly:v,formError:i,hooksCycle:W,actions:q}=j,x=w({url:"custom-apps/contacts",map:t=>({label:t.name,value:t.id})}),c=R({url:"custom-apps/contacts"}),g=R({url:"custom-apps/organizations"}),$=w({url:"custom-apps/organizations",map:t=>({label:t.name,value:t.id})}),m=I({title:"Organization",url:"custom-apps/organizations"});m.hooksCycle.afterCreate=t=>{r.value.organization={label:t.name,value:t.id}};const p=I({title:O.title,url:O.url});p.hooksCycle.afterCreate=t=>{r.value.contact={label:t.name,value:t.id}},W.afterResolve=t=>(t.is_lead=!0,t.contact&&(t.contact_id=t.contact.value),t.organization&&(t.organization_id=t.organization.value),t);const N=w({url:"custom-apps/pipelines",map:t=>({label:t.name,value:t.id})}),F=w({url:"custom-apps/pipeline-stages",map:t=>({label:t.name,value:t.id})});F.hooks.resolvedParams=t=>(t.params["filter[pipeline_id]"]=r.value.pipeline.value,t),Z(()=>{var t,o;q.formMode.isShow()&&(r.value.contact&&c.fetch((t=r.value.contact_id)!=null?t:r.value.contact.value),r.value.organization&&g.fetch((o=r.value.organization_id)!=null?o:r.value.organization.value))});const k=D("contact");return(t,o)=>(s(),d("div",null,[l(K,{class:"q-gutter-md q-mt-xs"},{default:n(()=>[l(V,{filled:"","use-input":"",dense:"","hide-bottom-space":"",modelValue:e(r).contact,"onUpdate:modelValue":o[1]||(o[1]=a=>e(r).contact=a),"error-message":e(i).contact,error:e(i).contact!==void 0,label:"Contact","input-debounce":"1000",options:e(x).options.value,onFilter:e(x).filterFn,onFilterAbort:e(x).abortFilterFn,readonly:e(v),clearable:""},{append:n(()=>[e(r).contact?T("",!0):(s(),P(A,{key:0,class:"cursor-pointer",name:"add_circle",onClick:o[0]||(o[0]=M(a=>e(p).actions.form.create(),["stop","prevent"]))}))]),"no-option":n(()=>[l(U,null,{default:n(()=>[l(C,{class:"text-grey"},{default:n(()=>[z(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","error-message","error","options","onFilter","onFilterAbort","readonly"]),l(V,{filled:"","use-input":"",dense:"","hide-bottom-space":"",modelValue:e(r).organization,"onUpdate:modelValue":o[3]||(o[3]=a=>e(r).organization=a),"error-message":e(i).organization,error:e(i).organization!==void 0,label:"Organization","input-debounce":"1000",options:e($).options.value,onFilter:e($).filterFn,onFilterAbort:e($).abortFilterFn,readonly:e(v),clearable:""},{append:n(()=>[e(r).organization?T("",!0):(s(),P(A,{key:0,class:"cursor-pointer",name:"add_circle",onClick:o[2]||(o[2]=M(a=>e(m).actions.form.create(),["stop","prevent"]))}))]),"no-option":n(()=>[l(U,null,{default:n(()=>[l(C,{class:"text-grey"},{default:n(()=>[z(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","error-message","error","options","onFilter","onFilterAbort","readonly"]),l(f,{modelValue:e(r).title,"onUpdate:modelValue":o[4]||(o[4]=a=>e(r).title=a),filled:"",label:"Title *",outlined:"","hide-bottom-space":"",dense:"",readonly:e(v),"error-message":e(i).title,error:e(i).title!==void 0},null,8,["modelValue","readonly","error-message","error"]),l(f,{modelValue:e(r).value,"onUpdate:modelValue":o[5]||(o[5]=a=>e(r).value=a),filled:"",label:"Value",outlined:"","hide-bottom-space":"",dense:"",readonly:e(v),"error-message":e(i).value,error:e(i).value!==void 0},null,8,["modelValue","readonly","error-message","error"]),l(V,{filled:"","use-input":"",dense:"","hide-bottom-space":"",modelValue:e(r).pipeline,"onUpdate:modelValue":o[6]||(o[6]=a=>e(r).pipeline=a),"error-message":e(i).pipeline,error:e(i).pipeline!==void 0,label:"Pipelines","input-debounce":"1000",options:e(N).options.value,onFilter:e(N).filterFn,onFilterAbort:e(N).abortFilterFn,readonly:e(v)},{"no-option":n(()=>[l(U,null,{default:n(()=>[l(C,{class:"text-grey"},{default:n(()=>[z(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","error-message","error","options","onFilter","onFilterAbort","readonly"]),l(V,{filled:"","use-input":"",dense:"","hide-bottom-space":"",modelValue:e(r).pipeline_stage,"onUpdate:modelValue":o[7]||(o[7]=a=>e(r).pipeline_stage=a),"error-message":e(i).pipeline_stage,error:e(i).pipeline_stage!==void 0,label:"Pipeline Stage","input-debounce":"1000",options:e(F).options.value,onFilter:e(F).filterFn,onFilterAbort:e(F).abortFilterFn,readonly:e(v)},{"no-option":n(()=>[l(U,null,{default:n(()=>[l(C,{class:"text-grey"},{default:n(()=>[z(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","error-message","error","options","onFilter","onFilterAbort","readonly"]),l(ae,{modelValue:e(r).tags,"onUpdate:modelValue":o[8]||(o[8]=a=>e(r).tags=a),modelModifiers:{value:!0},resource:"opportunities",label:"tags",readonly:e(v),error:e(i).tags},null,8,["modelValue","readonly","error"]),l(V,{modelValue:e(r).label,"onUpdate:modelValue":o[9]||(o[9]=a=>e(r).label=a),"error-message":e(i).label,error:e(i).label!==void 0,filled:"","hide-bottom-space":"",dense:"",options:["Hot","Warm","Cold"],label:"Label"},null,8,["modelValue","error-message","error"]),l(f,{modelValue:e(r).source,"onUpdate:modelValue":o[10]||(o[10]=a=>e(r).source=a),filled:"",label:"Source",outlined:"","hide-bottom-space":"",dense:"",readonly:e(v),"error-message":e(i).source,error:e(i).source!==void 0},null,8,["modelValue","readonly","error-message","error"]),e(q).formMode.isShow()?(s(),P(X,{key:0},{default:n(()=>[l(G,{modelValue:k.value,"onUpdate:modelValue":o[11]||(o[11]=a=>k.value=a),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:n(()=>[l(H,{name:"contact",label:"Contact"}),l(H,{name:"organization",label:"Organization"}),l(H,{name:"note",label:"Notes"}),l(H,{name:"task",label:"Task"})]),_:1},8,["modelValue"]),l(Y),l(J,{modelValue:k.value,"onUpdate:modelValue":o[14]||(o[14]=a=>k.value=a),animated:""},{default:n(()=>[l(S,{name:"contact"},{default:n(()=>{var a,y;return[e(c).loading.value?(s(),d("div",te,[l(E,{showing:e(c).loading.value,color:"primary"},null,8,["showing"])])):(s(),d("div",re,[l(f,{modelValue:e(c).record.value.name,"onUpdate:modelValue":o[12]||(o[12]=u=>e(c).record.value.name=u),filled:"",label:"Name",outlined:"","hide-bottom-space":"",dense:"",readonly:""},null,8,["modelValue"]),(s(!0),d(_,null,Q((a=e(c).record.value)==null?void 0:a.emails,(u,b)=>(s(),d("div",{key:b},[l(f,{readonly:"",type:"email",dense:"",filled:"","model-value":u,label:"Email"},null,8,["model-value"])]))),128)),(s(!0),d(_,null,Q((y=e(c).record.value)==null?void 0:y.phones,(u,b)=>(s(),d("div",{key:b},[l(f,{readonly:"",dense:"",filled:"","model-value":u,label:"Phone"},null,8,["model-value"])]))),128))]))]}),_:1}),l(S,{name:"organization"},{default:n(()=>{var a,y;return[e(g).loading.value?(s(),d("div",ne,[l(E,{showing:e(g).loading.value,color:"primary"},null,8,["showing"])])):(s(),d("div",ie,[l(f,{modelValue:e(g).record.value.name,"onUpdate:modelValue":o[13]||(o[13]=u=>e(g).record.value.name=u),filled:"",label:"Name",outlined:"","hide-bottom-space":"",dense:"",readonly:""},null,8,["modelValue"]),(s(!0),d(_,null,Q((a=e(g).record.value)==null?void 0:a.emails,(u,b)=>(s(),d("div",{key:b},[l(f,{readonly:"",type:"email",dense:"",filled:"","model-value":u,label:"Email"},null,8,["model-value"])]))),128)),(s(!0),d(_,null,Q((y=e(g).record.value)==null?void 0:y.phones,(u,b)=>(s(),d("div",{key:b},[l(f,{readonly:"",dense:"",filled:"","model-value":u,label:"Phone"},null,8,["model-value"])]))),128))]))]}),_:1}),l(S,{name:"note"},{default:n(()=>[l(oe,{id:e(r).id,type:"opportunities"},null,8,["id"])]),_:1}),l(S,{name:"task"},{default:n(()=>[l(le,{id:e(r).id,type:"opportunities"},null,8,["id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):T("",!0)]),_:1}),l(L,{modelValue:e(m).formShow.value,"onUpdate:modelValue":o[15]||(o[15]=a=>e(m).formShow.value=a),mode:e(m).formMode.value,title:"Organization",loading:e(m).formProcessing.value,onOnCreate:o[16]||(o[16]=a=>e(m).onCreate({})),onOnUpdate:o[17]||(o[17]=a=>e(m).onUpdate({}))},{form:n(()=>[l(h,{formHooks:e(m)},null,8,["formHooks"])]),_:1},8,["modelValue","mode","loading"]),l(L,{modelValue:e(p).formShow.value,"onUpdate:modelValue":o[18]||(o[18]=a=>e(p).formShow.value=a),mode:e(p).formMode.value,title:e(O).title,loading:e(p).formProcessing.value,onOnCreate:o[19]||(o[19]=a=>e(p).onCreate({})),onOnUpdate:o[20]||(o[20]=a=>e(p).onUpdate({}))},{form:n(()=>[l(ee,{formHooks:e(p)},null,8,["formHooks"])]),_:1},8,["modelValue","mode","title","loading"])]))}};export{He as default};
