import{bo as O,G as D,r as G,a2 as s,a5 as d,a8 as l,a4 as r,ag as e,a3 as P,a1 as T,bl as M,a9 as q,aa as z,aW as f,b1 as h,$ as J,a6 as _,a7 as Q}from"./index.62a56d21.js";import{Q as C,b as U}from"./QMenu.1879ff20.js";import{Q as V}from"./QSelect.56e8e954.js";import{Q as K,b as H}from"./ResourceForm.7fec25d5.js";import{a as I,Q as E,_ as L}from"./FormModal.7bac0fbd.js";import{Q as X,a as S,_ as Y,b as Z}from"./TaskIndexTemplate.0333021a.js";import{Q as ee}from"./QForm.9e0a2e8b.js";import{s as w}from"./selectRenderHooks.8016e166.js";import{H as R}from"./HandleFormShow.31fa948f.js";import{_ as oe}from"./OrganizationFormTemplate.f544f6e3.js";import le from"./ContactFormTemplate.27dbaead.js";import"./QResizeObserver.ca43569d.js";import"./QSpace.c6f2a2c6.js";import"./QToolbar.cb15798e.js";const ae={key:0,class:"q-ma-xl"},te={key:1,class:"q-gutter-md q-mt-xs"},ne={key:0,class:"q-ma-xl"},re={key:1,class:"q-gutter-md q-mt-xs"},ke={__name:"LeadFormTemplate",props:{formHooks:Object},setup(B){const{formHooks:j}=B,{formData:n,formReadonly:v,formError:i,hooksCycle:W,actions:A}=j,x=w({url:"custom-apps/contacts",map:t=>({label:t.name,value:t.id})}),c=R({url:"custom-apps/contacts"}),g=R({url:"custom-apps/organizations"}),$=w({url:"custom-apps/organizations",map:t=>({label:t.name,value:t.id})}),m=I({title:"Organization",url:"custom-apps/organizations"});m.hooksCycle.afterCreate=t=>{n.value.organization={label:t.name,value:t.id}};const p=I({title:O.title,url:O.url});p.hooksCycle.afterCreate=t=>{n.value.contact={label:t.name,value:t.id}},W.afterResolve=t=>(t.is_lead=!0,t.contact&&(t.contact_id=t.contact.value),t.organization&&(t.organization_id=t.organization.value),t);const N=w({url:"custom-apps/pipelines",map:t=>({label:t.name,value:t.id})}),F=w({url:"custom-apps/pipeline-stages",map:t=>({label:t.name,value:t.id})});F.hooks.resolvedParams=t=>(t.params["filter[pipeline_id]"]=n.value.pipeline.value,t),D(()=>{var t,o;A.formMode.isShow()&&(n.value.contact&&c.fetch((t=n.value.contact_id)!=null?t:n.value.contact.value),n.value.organization&&g.fetch((o=n.value.organization_id)!=null?o:n.value.organization.value))});const k=G("contact");return(t,o)=>(s(),d("div",null,[l(ee,{class:"q-gutter-md q-mt-xs"},{default:r(()=>[l(V,{filled:"","use-input":"",dense:"","hide-bottom-space":"",modelValue:e(n).contact,"onUpdate:modelValue":o[1]||(o[1]=a=>e(n).contact=a),"error-message":e(i).contact,error:e(i).contact!==void 0,label:"Contact","input-debounce":"1000",options:e(x).options.value,onFilter:e(x).filterFn,onFilterAbort:e(x).abortFilterFn,readonly:e(v),clearable:""},{append:r(()=>[e(n).contact?q("",!0):(s(),P(T,{key:0,class:"cursor-pointer",name:"add_circle",onClick:o[0]||(o[0]=M(a=>e(p).actions.form.create(),["stop","prevent"]))}))]),"no-option":r(()=>[l(C,null,{default:r(()=>[l(U,{class:"text-grey"},{default:r(()=>[z(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","error-message","error","options","onFilter","onFilterAbort","readonly"]),l(V,{filled:"","use-input":"",dense:"","hide-bottom-space":"",modelValue:e(n).organization,"onUpdate:modelValue":o[3]||(o[3]=a=>e(n).organization=a),"error-message":e(i).organization,error:e(i).organization!==void 0,label:"Organization","input-debounce":"1000",options:e($).options.value,onFilter:e($).filterFn,onFilterAbort:e($).abortFilterFn,readonly:e(v),clearable:""},{append:r(()=>[e(n).organization?q("",!0):(s(),P(T,{key:0,class:"cursor-pointer",name:"add_circle",onClick:o[2]||(o[2]=M(a=>e(m).actions.form.create(),["stop","prevent"]))}))]),"no-option":r(()=>[l(C,null,{default:r(()=>[l(U,{class:"text-grey"},{default:r(()=>[z(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","error-message","error","options","onFilter","onFilterAbort","readonly"]),l(f,{modelValue:e(n).title,"onUpdate:modelValue":o[4]||(o[4]=a=>e(n).title=a),filled:"",label:"Title *",outlined:"","hide-bottom-space":"",dense:"",readonly:e(v),"error-message":e(i).title,error:e(i).title!==void 0},null,8,["modelValue","readonly","error-message","error"]),l(f,{modelValue:e(n).value,"onUpdate:modelValue":o[5]||(o[5]=a=>e(n).value=a),filled:"",label:"Value",outlined:"","hide-bottom-space":"",dense:"",readonly:e(v),"error-message":e(i).value,error:e(i).value!==void 0},null,8,["modelValue","readonly","error-message","error"]),l(V,{filled:"","use-input":"",dense:"","hide-bottom-space":"",modelValue:e(n).pipeline,"onUpdate:modelValue":o[6]||(o[6]=a=>e(n).pipeline=a),"error-message":e(i).pipeline,error:e(i).pipeline!==void 0,label:"Pipelines","input-debounce":"1000",options:e(N).options.value,onFilter:e(N).filterFn,onFilterAbort:e(N).abortFilterFn,readonly:e(v)},{"no-option":r(()=>[l(C,null,{default:r(()=>[l(U,{class:"text-grey"},{default:r(()=>[z(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","error-message","error","options","onFilter","onFilterAbort","readonly"]),l(V,{filled:"","use-input":"",dense:"","hide-bottom-space":"",modelValue:e(n).pipeline_stage,"onUpdate:modelValue":o[7]||(o[7]=a=>e(n).pipeline_stage=a),"error-message":e(i).pipeline_stage,error:e(i).pipeline_stage!==void 0,label:"Pipeline Stage","input-debounce":"1000",options:e(F).options.value,onFilter:e(F).filterFn,onFilterAbort:e(F).abortFilterFn,readonly:e(v)},{"no-option":r(()=>[l(C,null,{default:r(()=>[l(U,{class:"text-grey"},{default:r(()=>[z(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","error-message","error","options","onFilter","onFilterAbort","readonly"]),l(V,{modelValue:e(n).label,"onUpdate:modelValue":o[8]||(o[8]=a=>e(n).label=a),"error-message":e(i).label,error:e(i).label!==void 0,filled:"","hide-bottom-space":"",dense:"",options:["Hot","Warm","Cold"],label:"Label"},null,8,["modelValue","error-message","error"]),l(f,{modelValue:e(n).source,"onUpdate:modelValue":o[9]||(o[9]=a=>e(n).source=a),filled:"",label:"Source",outlined:"","hide-bottom-space":"",dense:"",readonly:e(v),"error-message":e(i).source,error:e(i).source!==void 0},null,8,["modelValue","readonly","error-message","error"]),e(A).formMode.isShow()?(s(),P(h,{key:0},{default:r(()=>[l(K,{modelValue:k.value,"onUpdate:modelValue":o[10]||(o[10]=a=>k.value=a),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:r(()=>[l(H,{name:"contact",label:"Contact"}),l(H,{name:"organization",label:"Organization"}),l(H,{name:"note",label:"Notes"}),l(H,{name:"task",label:"Task"})]),_:1},8,["modelValue"]),l(J),l(X,{modelValue:k.value,"onUpdate:modelValue":o[13]||(o[13]=a=>k.value=a),animated:""},{default:r(()=>[l(S,{name:"contact"},{default:r(()=>{var a,y;return[e(c).loading.value?(s(),d("div",ae,[l(E,{showing:e(c).loading.value,color:"primary"},null,8,["showing"])])):(s(),d("div",te,[l(f,{modelValue:e(c).record.value.name,"onUpdate:modelValue":o[11]||(o[11]=u=>e(c).record.value.name=u),filled:"",label:"Name",outlined:"","hide-bottom-space":"",dense:"",readonly:""},null,8,["modelValue"]),(s(!0),d(_,null,Q((a=e(c).record.value)==null?void 0:a.emails,(u,b)=>(s(),d("div",{key:b},[l(f,{readonly:"",type:"email",dense:"",filled:"","model-value":u,label:"Email"},null,8,["model-value"])]))),128)),(s(!0),d(_,null,Q((y=e(c).record.value)==null?void 0:y.phones,(u,b)=>(s(),d("div",{key:b},[l(f,{readonly:"",dense:"",filled:"","model-value":u,label:"Phone"},null,8,["model-value"])]))),128))]))]}),_:1}),l(S,{name:"organization"},{default:r(()=>{var a,y;return[e(g).loading.value?(s(),d("div",ne,[l(E,{showing:e(g).loading.value,color:"primary"},null,8,["showing"])])):(s(),d("div",re,[l(f,{modelValue:e(g).record.value.name,"onUpdate:modelValue":o[12]||(o[12]=u=>e(g).record.value.name=u),filled:"",label:"Name",outlined:"","hide-bottom-space":"",dense:"",readonly:""},null,8,["modelValue"]),(s(!0),d(_,null,Q((a=e(g).record.value)==null?void 0:a.emails,(u,b)=>(s(),d("div",{key:b},[l(f,{readonly:"",type:"email",dense:"",filled:"","model-value":u,label:"Email"},null,8,["model-value"])]))),128)),(s(!0),d(_,null,Q((y=e(g).record.value)==null?void 0:y.phones,(u,b)=>(s(),d("div",{key:b},[l(f,{readonly:"",dense:"",filled:"","model-value":u,label:"Phone"},null,8,["model-value"])]))),128))]))]}),_:1}),l(S,{name:"note"},{default:r(()=>[l(Y,{id:e(n).id,type:"opportunities"},null,8,["id"])]),_:1}),l(S,{name:"task"},{default:r(()=>[l(Z,{id:e(n).id,type:"opportunities"},null,8,["id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):q("",!0)]),_:1}),l(L,{modelValue:e(m).formShow.value,"onUpdate:modelValue":o[14]||(o[14]=a=>e(m).formShow.value=a),mode:e(m).formMode.value,title:"Organization",loading:e(m).formProcessing.value,onOnCreate:o[15]||(o[15]=a=>e(m).onCreate({})),onOnUpdate:o[16]||(o[16]=a=>e(m).onUpdate({}))},{form:r(()=>[l(oe,{formHooks:e(m)},null,8,["formHooks"])]),_:1},8,["modelValue","mode","loading"]),l(L,{modelValue:e(p).formShow.value,"onUpdate:modelValue":o[17]||(o[17]=a=>e(p).formShow.value=a),mode:e(p).formMode.value,title:e(O).title,loading:e(p).formProcessing.value,onOnCreate:o[18]||(o[18]=a=>e(p).onCreate({})),onOnUpdate:o[19]||(o[19]=a=>e(p).onUpdate({}))},{form:r(()=>[l(le,{formHooks:e(p)},null,8,["formHooks"])]),_:1},8,["modelValue","mode","title","loading"])]))}};export{ke as default};
