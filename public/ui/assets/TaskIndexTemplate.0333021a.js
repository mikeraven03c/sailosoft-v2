import{f as Nn,j as Ye,n as Wt,k as zn,m as je,p as tt,t as Mt,v as Le,u as nt,r as F,a as _,w as ne,E as Re,g as He,h as g,W as Me,bp as En,b as we,bq as jn,c as _e,y as dt,A as ct,I as Fn,aA as Xt,aB as Jt,G as Ie,a2 as ae,a5 as qe,a8 as H,az as Qe,a4 as N,a3 as Ae,ay as Ln,ag as D,br as Gt,ah as Vn,Z as Rn,a1 as ue,ad as U,bs as Qn,s as en,aU as tn,q as qt,bt as Un,o as Zn,au as Kn,bu as z,bv as nn,bw as Wn,be as Xn,bx as Jn,by as Gn,aL as ea,aO as ta,b6 as na,i as aa,bz as oa,af as le,ab as Ht,$ as an,a6 as ra,a7 as la,aW as $e,b5 as at,bl as Tt,a_ as ia,b1 as on,bA as sa,bB as ua,H as Pt,aa as da,a9 as Ot}from"./index.62a56d21.js";import{I as ft,_ as rn,a as ln,u as ca,c as fa,d as ma,Q as va,b as Bt}from"./ResourceForm.7fec25d5.js";import{F as sn,a as mt,Q as ha,C as Yt}from"./FormModal.7bac0fbd.js";import{c as ga,d as un,b as Ue,Q as vt,i as pa,g as ya}from"./QMenu.1879ff20.js";import{g as $t,s as At,a as ba,Q as wa}from"./QToolbar.cb15798e.js";import{Q as ot}from"./QSelect.56e8e954.js";import{Q as _a}from"./QForm.9e0a2e8b.js";import{a as Ca}from"./QResizeObserver.ca43569d.js";import{s as ka}from"./selectRenderHooks.8016e166.js";function Sa(e){const t=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((a,o)=>{const i=parseFloat(a);i&&(t[o]=i)}),t}var xa=Nn({name:"touch-swipe",beforeMount(e,{value:t,arg:a,modifiers:o}){if(o.mouse!==!0&&Ye.has.touch!==!0)return;const i=o.mouseCapture===!0?"Capture":"",r={handler:t,sensitivity:Sa(a),direction:$t(o),noop:Wt,mouseStart(u){At(u,r)&&zn(u)&&(je(r,"temp",[[document,"mousemove","move",`notPassive${i}`],[document,"mouseup","end","notPassiveCapture"]]),r.start(u,!0))},touchStart(u){if(At(u,r)){const c=u.target;je(r,"temp",[[c,"touchmove","move","notPassiveCapture"],[c,"touchcancel","end","notPassiveCapture"],[c,"touchend","end","notPassiveCapture"]]),r.start(u)}},start(u,c){Ye.is.firefox===!0&&tt(e,!0);const p=Mt(u);r.event={x:p.left,y:p.top,time:Date.now(),mouse:c===!0,dir:!1}},move(u){if(r.event===void 0)return;if(r.event.dir!==!1){Le(u);return}const c=Date.now()-r.event.time;if(c===0)return;const p=Mt(u),h=p.left-r.event.x,s=Math.abs(h),w=p.top-r.event.y,M=Math.abs(w);if(r.event.mouse!==!0){if(s<r.sensitivity[1]&&M<r.sensitivity[1]){r.end(u);return}}else if(window.getSelection().toString()!==""){r.end(u);return}else if(s<r.sensitivity[2]&&M<r.sensitivity[2])return;const x=s/c,T=M/c;r.direction.vertical===!0&&s<M&&s<100&&T>r.sensitivity[0]&&(r.event.dir=w<0?"up":"down"),r.direction.horizontal===!0&&s>M&&M<100&&x>r.sensitivity[0]&&(r.event.dir=h<0?"left":"right"),r.direction.up===!0&&s<M&&w<0&&s<100&&T>r.sensitivity[0]&&(r.event.dir="up"),r.direction.down===!0&&s<M&&w>0&&s<100&&T>r.sensitivity[0]&&(r.event.dir="down"),r.direction.left===!0&&s>M&&h<0&&M<100&&x>r.sensitivity[0]&&(r.event.dir="left"),r.direction.right===!0&&s>M&&h>0&&M<100&&x>r.sensitivity[0]&&(r.event.dir="right"),r.event.dir!==!1?(Le(u),r.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),ga(),r.styleCleanup=C=>{r.styleCleanup=void 0,document.body.classList.remove("non-selectable");const k=()=>{document.body.classList.remove("no-pointer-events--children")};C===!0?setTimeout(k,50):k()}),r.handler({evt:u,touch:r.event.mouse!==!0,mouse:r.event.mouse,direction:r.event.dir,duration:c,distance:{x:s,y:M}})):r.end(u)},end(u){r.event!==void 0&&(nt(r,"temp"),Ye.is.firefox===!0&&tt(e,!1),r.styleCleanup!==void 0&&r.styleCleanup(!0),u!==void 0&&r.event.dir!==!1&&Le(u),r.event=void 0)}};if(e.__qtouchswipe=r,o.mouse===!0){const u=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";je(r,"main",[[e,"mousedown","mouseStart",`passive${u}`]])}Ye.has.touch===!0&&je(r,"main",[[e,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const a=e.__qtouchswipe;a!==void 0&&(t.oldValue!==t.value&&(typeof t.value!="function"&&a.end(),a.handler=t.value),a.direction=$t(t.modifiers))},beforeUnmount(e){const t=e.__qtouchswipe;t!==void 0&&(nt(t,"main"),nt(t,"temp"),Ye.is.firefox===!0&&tt(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchswipe)}});function dn(){let e=Object.create(null);return{getCache:(t,a)=>e[t]===void 0?e[t]=typeof a=="function"?a():a:e[t],setCache(t,a){e[t]=a},hasCache(t){return Object.hasOwnProperty.call(e,t)},clearCache(t){t!==void 0?delete e[t]:e=Object.create(null)}}}const Da={name:{required:!0},disable:Boolean},It={setup(e,{slots:t}){return()=>g("div",{class:"q-panel scroll",role:"tabpanel"},we(t.default))}},Ma={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},qa=["update:modelValue","beforeTransition","transition"];function Ha(){const{props:e,emit:t,proxy:a}=He(),{getCache:o}=dn();let i,r;const u=F(null),c=F(null);function p(q){const A=e.vertical===!0?"up":"left";G((a.$q.lang.rtl===!0?-1:1)*(q.direction===A?1:-1))}const h=_(()=>[[xa,p,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),s=_(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),w=_(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),M=_(()=>`--q-transition-duration: ${e.transitionDuration}ms`),x=_(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),T=_(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),C=_(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);ne(()=>e.modelValue,(q,A)=>{const Z=$(q)===!0?m(q):-1;r!==!0&&W(Z===-1?0:Z<m(A)?-1:1),u.value!==Z&&(u.value=Z,t("beforeTransition",q,A),Re(()=>{t("transition",q,A)}))});function k(){G(1)}function I(){G(-1)}function V(q){t("update:modelValue",q)}function $(q){return q!=null&&q!==""}function m(q){return i.findIndex(A=>A.props.name===q&&A.props.disable!==""&&A.props.disable!==!0)}function O(){return i.filter(q=>q.props.disable!==""&&q.props.disable!==!0)}function W(q){const A=q!==0&&e.animated===!0&&u.value!==-1?"q-transition--"+(q===-1?s.value:w.value):null;c.value!==A&&(c.value=A)}function G(q,A=u.value){let Z=A+q;for(;Z!==-1&&Z<i.length;){const oe=i[Z];if(oe!==void 0&&oe.props.disable!==""&&oe.props.disable!==!0){W(q),r=!0,t("update:modelValue",oe.props.name),setTimeout(()=>{r=!1});return}Z+=q}e.infinite===!0&&i.length!==0&&A!==-1&&A!==i.length&&G(q,q===-1?i.length:-1)}function de(){const q=m(e.modelValue);return u.value!==q&&(u.value=q),!0}function ce(){const q=$(e.modelValue)===!0&&de()&&i[u.value];return e.keepAlive===!0?[g(jn,T.value,[g(C.value===!0?o(x.value,()=>({...It,name:x.value})):It,{key:x.value,style:M.value},()=>q)])]:[g("div",{class:"q-panel scroll",style:M.value,key:x.value,role:"tabpanel"},[q])]}function fe(){if(i.length!==0)return e.animated===!0?[g(Me,{name:c.value},ce)]:ce()}function R(q){return i=En(we(q.default,[])).filter(A=>A.props!==null&&A.props.slot===void 0&&$(A.props.name)===!0),i.length}function Te(){return i}return Object.assign(a,{next:k,previous:I,goTo:V}),{panelIndex:u,panelDirectives:h,updatePanelsList:R,updatePanelIndex:de,getPanelContent:fe,getEnabledPanels:O,getPanels:Te,isValidPanelName:$,keepAliveProps:T,needsUniqueKeepAliveWrapper:C,goToPanelByOffset:G,goToPanel:V,nextPanel:k,previousPanel:I}}var Nt=_e({name:"QTabPanel",props:Da,setup(e,{slots:t}){return()=>g("div",{class:"q-tab-panel",role:"tabpanel"},we(t.default))}}),Ta=_e({name:"QTabPanels",props:{...Ma,...dt},emits:qa,setup(e,{slots:t}){const a=He(),o=ct(e,a.proxy.$q),{updatePanelsList:i,getPanelContent:r,panelDirectives:u}=Ha(),c=_(()=>"q-tab-panels q-panel-parent"+(o.value===!0?" q-tab-panels--dark q-dark":""));return()=>(i(t),Fn("div",{class:c.value},r(),"pan",e.swipeable,()=>u.value))}});const Pa={__name:"NoteIndexTemplate",props:{id:Number,type:String,tabsConfig:Object},setup(e){const t=e,a={title:"Note",url:"custom-apps/notes",columns:[{name:"name",align:"left",label:"Name",field:"name",sortable:!0},{name:"note",align:"left",label:"Note",field:"note",sortable:!1,format:s=>s&&s.length>10?s.substring(0,10)+"...":s},{name:"created_at",align:"left",label:"Created at",field:"created_at",sortable:!0}],formInitialValues:{name:"",label:"",note:""},tabsConfig:t.tabsConfig,template:()=>Xt(()=>Jt(()=>import("./NoteFormTemplate.a7ba94cd.js"),["assets/NoteFormTemplate.a7ba94cd.js","assets/index.62a56d21.js","assets/index.9534a8ef.css","assets/QForm.9e0a2e8b.js","assets/ResourceForm.7fec25d5.js","assets/QResizeObserver.ca43569d.js","assets/QSelect.56e8e954.js","assets/QMenu.1879ff20.js","assets/FormModal.7bac0fbd.js","assets/QSpace.c6f2a2c6.js","assets/QToolbar.cb15798e.js","assets/selectRenderHooks.8016e166.js"]))},o=sn(),i=ft({title:a.title,url:a.url});i.hooksCycle.params.resolvedParams=s=>(s.params["filter[resource_id]"]=t.id,s.params["filter[resource_type]"]=t.type,s);const r=mt({title:a.title,url:a.url,initialValues:a.formInitialValues});r.hooksCycle.afterResolve=s=>(s.resource_id=t.id,s.resource_type=t.type,s),a.formHandleHooks=o,a.formHooks=r,a.indexHooks=i;const{form:u}=o,c=_(()=>a.template()),{resetFetch:p,refresh:h}=i;return Ie(()=>{h()}),(s,w)=>(ae(),qe("div",null,[H(rn,Qe(a,{bodyClass:"q-pa-sm"}),null,16),H(ln,Qe({formStyle:"width: 600px; max-width:90vw;",ref_key:"form",ref:u},a,{onOnCreate:D(p),onOnUpdate:D(h)}),{default:N(()=>[(ae(),Ae(Ln(c.value),{formHooks:a.formHooks},null,8,["formHooks"]))]),_:1},16,["onOnCreate","onOnUpdate"])]))}};function cn(e,t){if(t&&e===t)return null;const a=e.nodeName.toLowerCase();if(["div","li","ul","ol","blockquote"].includes(a)===!0)return e;const o=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,i=o.display;return i==="block"||i==="table"?e:cn(e.parentNode)}function rt(e,t,a){return!e||e===document.body?!1:a===!0&&e===t||(t===document?document.body:t).contains(e.parentNode)}function fn(e,t,a){if(a||(a=document.createRange(),a.selectNode(e),a.setStart(e,0)),t.count===0)a.setEnd(e,t.count);else if(t.count>0)if(e.nodeType===Node.TEXT_NODE)e.textContent.length<t.count?t.count-=e.textContent.length:(a.setEnd(e,t.count),t.count=0);else for(let o=0;t.count!==0&&o<e.childNodes.length;o++)a=fn(e.childNodes[o],t,a);return a}const Oa=/^https?:\/\//;class Ba{constructor(t,a){this.el=t,this.eVm=a,this._range=null}get selection(){if(this.el){const t=document.getSelection();if(rt(t.anchorNode,this.el,!0)&&rt(t.focusNode,this.el,!0))return t}return null}get hasSelection(){return this.selection!==null?this.selection.toString().length!==0:!1}get range(){const t=this.selection;return t!==null&&t.rangeCount?t.getRangeAt(0):this._range}get parent(){const t=this.range;if(t!==null){const a=t.startContainer;return a.nodeType===document.ELEMENT_NODE?a:a.parentNode}return null}get blockParent(){const t=this.parent;return t!==null?cn(t,this.el):null}save(t=this.range){t!==null&&(this._range=t)}restore(t=this._range){const a=document.createRange(),o=document.getSelection();t!==null?(a.setStart(t.startContainer,t.startOffset),a.setEnd(t.endContainer,t.endOffset),o.removeAllRanges(),o.addRange(a)):(o.selectAllChildren(this.el),o.collapseToEnd())}savePosition(){let t=-1,a;const o=document.getSelection(),i=this.el.parentNode;if(o.focusNode&&rt(o.focusNode,i))for(a=o.focusNode,t=o.focusOffset;a&&a!==i;)a!==this.el&&a.previousSibling?(a=a.previousSibling,t+=a.textContent.length):a=a.parentNode;this.savedPos=t}restorePosition(t=0){if(this.savedPos>0&&this.savedPos<t){const a=window.getSelection(),o=fn(this.el,{count:this.savedPos});o&&(o.collapse(!1),a.removeAllRanges(),a.addRange(o))}}hasParent(t,a){const o=a?this.parent:this.blockParent;return o!==null?o.nodeName.toLowerCase()===t.toLowerCase():!1}hasParents(t,a,o=this.parent){return o===null?!1:t.includes(o.nodeName.toLowerCase())===!0?!0:a===!0?this.hasParents(t,a,o.parentNode):!1}is(t,a){if(this.selection===null)return!1;switch(t){case"formatBlock":return a==="DIV"&&this.parent===this.el||this.hasParent(a,a==="PRE");case"link":return this.hasParent("A",!0);case"fontSize":return document.queryCommandValue(t)===a;case"fontName":const o=document.queryCommandValue(t);return o===`"${a}"`||o===a;case"fullscreen":return this.eVm.inFullscreen.value;case"viewsource":return this.eVm.isViewingSource.value;case void 0:return!1;default:const i=document.queryCommandState(t);return a!==void 0?i===a:i}}getParentAttribute(t){return this.parent!==null?this.parent.getAttribute(t):null}can(t){if(t==="outdent")return this.hasParents(["blockquote","li"],!0);if(t==="indent")return this.hasParents(["li"],!0);if(t==="link")return this.selection!==null||this.is("link")}apply(t,a,o=Wt){if(t==="formatBlock")["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].includes(a)&&this.is(t,a)&&(t="outdent",a=null),a==="PRE"&&this.is(t,"PRE")&&(a="P");else if(t==="print"){o();const i=window.open();i.document.write(`
        <!doctype html>
        <html>
          <head>
            <title>Print - ${document.title}</title>
          </head>
          <body>
            <div>${this.el.innerHTML}</div>
          </body>
        </html>
      `),i.print(),i.close();return}else if(t==="link"){const i=this.getParentAttribute("href");if(i===null){const r=this.selectWord(this.selection),u=r?r.toString():"";if(!u.length&&(!this.range||!this.range.cloneContents().querySelector("img")))return;this.eVm.editLinkUrl.value=Oa.test(u)?u:"https://",document.execCommand("createLink",!1,this.eVm.editLinkUrl.value),this.save(r.getRangeAt(0))}else this.eVm.editLinkUrl.value=i,this.range.selectNodeContents(this.parent),this.save();return}else if(t==="fullscreen"){this.eVm.toggleFullscreen(),o();return}else if(t==="viewsource"){this.eVm.isViewingSource.value=this.eVm.isViewingSource.value===!1,this.eVm.setContent(this.eVm.props.modelValue),o();return}document.execCommand(t,!1,a),o()}selectWord(t){if(t===null||t.isCollapsed!==!0||t.modify===void 0)return t;const a=document.createRange();a.setStart(t.anchorNode,t.anchorOffset),a.setEnd(t.focusNode,t.focusOffset);const o=a.collapsed?["backward","forward"]:["forward","backward"];a.detach();const i=t.focusNode,r=t.focusOffset;return t.collapse(t.anchorNode,t.anchorOffset),t.modify("move",o[0],"character"),t.modify("move",o[1],"word"),t.extend(i,r),t.modify("extend",o[1],"character"),t.modify("extend",o[0],"word"),t}}var Ya=_e({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:t}){const a=_(()=>{const o=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(i=>e[i]===!0).map(i=>`q-btn-group--${i}`).join(" ");return`q-btn-group row no-wrap${o.length!==0?" "+o:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>g("div",{class:a.value},we(t.default))}});const $a=Object.keys(Gt);function Aa(e){return $a.reduce((t,a)=>{const o=e[a];return o!==void 0&&(t[a]=o),t},{})}var Ia=_e({name:"QBtnDropdown",props:{...Gt,...Vn,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:a}){const{proxy:o}=He(),i=F(e.modelValue),r=F(null),u=Rn(),c=_(()=>{const m={"aria-expanded":i.value===!0?"true":"false","aria-haspopup":"true","aria-controls":u.value,"aria-label":e.toggleAriaLabel||o.$q.lang.label[i.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(m["aria-disabled"]="true"),m}),p=_(()=>"q-btn-dropdown__arrow"+(i.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),h=_(()=>Qn(e)),s=_(()=>Aa(e));ne(()=>e.modelValue,m=>{r.value!==null&&r.value[m?"show":"hide"]()}),ne(()=>e.split,$);function w(m){i.value=!0,a("beforeShow",m)}function M(m){a("show",m),a("update:modelValue",!0)}function x(m){i.value=!1,a("beforeHide",m)}function T(m){a("hide",m),a("update:modelValue",!1)}function C(m){a("click",m)}function k(m){en(m),$(),a("click",m)}function I(m){r.value!==null&&r.value.toggle(m)}function V(m){r.value!==null&&r.value.show(m)}function $(m){r.value!==null&&r.value.hide(m)}return Object.assign(o,{show:V,hide:$,toggle:I}),Ie(()=>{e.modelValue===!0&&V()}),()=>{const m=[g(ue,{class:p.value,name:e.dropdownIcon||o.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&m.push(g(un,{ref:r,id:u.value,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:w,onShow:M,onBeforeHide:x,onHide:T},t.default)),e.split===!1?g(U,{class:"q-btn-dropdown q-btn-dropdown--simple",...s.value,...c.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:C},{default:()=>we(t.label,[]).concat(m),loading:t.loading}):g(Ya,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...h.value,glossy:e.glossy,stretch:e.stretch},()=>[g(U,{class:"q-btn-dropdown--current",...s.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:k},{default:t.label,loading:t.loading}),g(U,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...c.value,...h.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>m)])}}});function mn(e,t,a){t.handler?t.handler(e,a,a.caret):a.runCmd(t.cmd,t.param)}function ht(e){return g("div",{class:"q-editor__toolbar-group"},e)}function vn(e,t,a,o=!1){const i=o||(t.type==="toggle"?t.toggled?t.toggled(e):t.cmd&&e.caret.is(t.cmd,t.param):!1),r=[];if(t.tip&&e.$q.platform.is.desktop){const u=t.key?g("div",[g("small",`(CTRL + ${String.fromCharCode(t.key)})`)]):null;r.push(g(ba,{delay:1e3},()=>[g("div",{innerHTML:t.tip}),u]))}return g(U,{...e.buttonProps.value,icon:t.icon!==null?t.icon:void 0,color:i?t.toggleColor||e.props.toolbarToggleColor:t.color||e.props.toolbarColor,textColor:i&&!e.props.toolbarPush?null:t.textColor||e.props.toolbarTextColor,label:t.label,disable:t.disable?typeof t.disable=="function"?t.disable(e):!0:!1,size:"sm",onClick(u){a&&a(),mn(u,t,e)}},()=>r)}function Na(e,t){const a=t.list==="only-icons";let o=t.label,i=t.icon!==null?t.icon:void 0,r,u;function c(){h.component.proxy.hide()}if(a)u=t.options.map(s=>{const w=s.type===void 0?e.caret.is(s.cmd,s.param):!1;return w&&(o=s.tip,i=s.icon!==null?s.icon:void 0),vn(e,s,c,w)}),r=e.toolbarBackgroundClass.value,u=[ht(u)];else{const s=e.props.toolbarToggleColor!==void 0?`text-${e.props.toolbarToggleColor}`:null,w=e.props.toolbarTextColor!==void 0?`text-${e.props.toolbarTextColor}`:null,M=t.list==="no-icons";u=t.options.map(x=>{const T=x.disable?x.disable(e):!1,C=x.type===void 0?e.caret.is(x.cmd,x.param):!1;C&&(o=x.tip,i=x.icon!==null?x.icon:void 0);const k=x.htmlTip;return g(vt,{active:C,activeClass:s,clickable:!0,disable:T,dense:!0,onClick(I){c(),e.contentRef.value!==null&&e.contentRef.value.focus(),e.caret.restore(),mn(I,x,e)}},()=>[M===!0?null:g(Ue,{class:C?s:w,side:!0},()=>g(ue,{name:x.icon!==null?x.icon:void 0})),g(Ue,k?()=>g("div",{class:"text-no-wrap",innerHTML:x.htmlTip}):x.tip?()=>g("div",{class:"text-no-wrap"},x.tip):void 0)])}),r=[e.toolbarBackgroundClass.value,w]}const p=t.highlight&&o!==t.label,h=g(Ia,{...e.buttonProps.value,noCaps:!0,noWrap:!0,color:p?e.props.toolbarToggleColor:e.props.toolbarColor,textColor:p&&!e.props.toolbarPush?null:e.props.toolbarTextColor,label:t.fixedLabel?t.label:o,icon:t.fixedIcon?t.icon!==null?t.icon:void 0:i,contentClass:r,onShow:s=>e.emit("dropdownShow",s),onHide:s=>e.emit("dropdownHide",s),onBeforeShow:s=>e.emit("dropdownBeforeShow",s),onBeforeHide:s=>e.emit("dropdownBeforeHide",s)},()=>u);return h}function za(e){if(e.caret)return e.buttons.value.filter(t=>!e.isViewingSource.value||t.find(a=>a.cmd==="viewsource")).map(t=>ht(t.map(a=>e.isViewingSource.value&&a.cmd!=="viewsource"?!1:a.type==="slot"?we(e.slots[a.slot]):a.type==="dropdown"?Na(e,a):vn(e,a))))}function Ea(e,t,a,o={}){const i=Object.keys(o);if(i.length===0)return{};const r={default_font:{cmd:"fontName",param:e,icon:a,tip:t}};return i.forEach(u=>{const c=o[u];r[u]={cmd:"fontName",param:c,icon:a,tip:c,htmlTip:`<font face="${c}">${c}</font>`}}),r}function ja(e){if(e.caret){const t=e.props.toolbarColor||e.props.toolbarTextColor;let a=e.editLinkUrl.value;const o=()=>{e.caret.restore(),a!==e.editLinkUrl.value&&document.execCommand("createLink",!1,a===""?" ":a),e.editLinkUrl.value=null};return[g("div",{class:`q-mx-xs text-${t}`},`${e.$q.lang.editor.url}: `),g("input",{key:"qedt_btm_input",class:"col q-editor__link-input",value:a,onInput:i=>{en(i),a=i.target.value},onKeydown:i=>{if(tn(i)!==!0)switch(i.keyCode){case 13:return qt(i),o();case 27:qt(i),e.caret.restore(),(!e.editLinkUrl.value||e.editLinkUrl.value==="https://")&&document.execCommand("unlink"),e.editLinkUrl.value=null;break}}}),ht([g(U,{key:"qedt_btm_rem",tabindex:-1,...e.buttonProps.value,label:e.$q.lang.label.remove,noCaps:!0,onClick:()=>{e.caret.restore(),document.execCommand("unlink"),e.editLinkUrl.value=null}}),g(U,{key:"qedt_btm_upd",...e.buttonProps.value,label:e.$q.lang.label.update,noCaps:!0,onClick:o})])]}}const Fa=Object.prototype.toString,lt=Object.prototype.hasOwnProperty,La=new Set(["Boolean","Number","String","Function","Array","Date","RegExp"].map(e=>"[object "+e+"]"));function zt(e){if(e!==Object(e)||La.has(Fa.call(e))===!0||e.constructor&&lt.call(e,"constructor")===!1&&lt.call(e.constructor.prototype,"isPrototypeOf")===!1)return!1;let t;for(t in e);return t===void 0||lt.call(e,t)}function hn(){let e,t,a,o,i,r,u=arguments[0]||{},c=1,p=!1;const h=arguments.length;for(typeof u=="boolean"&&(p=u,u=arguments[1]||{},c=2),Object(u)!==u&&typeof u!="function"&&(u={}),h===c&&(u=this,c--);c<h;c++)if((e=arguments[c])!==null)for(t in e)a=u[t],o=e[t],u!==o&&(p===!0&&o&&((i=Array.isArray(o))||zt(o)===!0)?(i===!0?r=Array.isArray(a)===!0?a:[]:r=zt(a)===!0?a:{},u[t]=hn(p,r,o)):o!==void 0&&(u[t]=o));return u}var Va=_e({name:"QEditor",props:{...dt,...ca,modelValue:{type:String,required:!0},readonly:Boolean,disable:Boolean,minHeight:{type:String,default:"10rem"},maxHeight:String,height:String,definitions:Object,fonts:Object,placeholder:String,toolbar:{type:Array,validator:e=>e.length===0||e.every(t=>t.length),default:()=>[["left","center","right","justify"],["bold","italic","underline","strike"],["undo","redo"]]},toolbarColor:String,toolbarBg:String,toolbarTextColor:String,toolbarToggleColor:{type:String,default:"primary"},toolbarOutline:Boolean,toolbarPush:Boolean,toolbarRounded:Boolean,paragraphTag:{type:String,validator:e=>["div","p"].includes(e),default:"div"},contentStyle:Object,contentClass:[Object,Array,String],square:Boolean,flat:Boolean,dense:Boolean},emits:[...fa,"update:modelValue","keydown","click","focus","blur","dropdownShow","dropdownHide","dropdownBeforeShow","dropdownBeforeHide","linkShow","linkHide"],setup(e,{slots:t,emit:a}){const{proxy:o}=He(),{$q:i}=o,r=ct(e,i),{inFullscreen:u,toggleFullscreen:c}=ma(),p=Un(),h=F(null),s=F(null),w=F(null),M=F(!1),x=_(()=>!e.readonly&&!e.disable);let T,C,k=e.modelValue;document.execCommand("defaultParagraphSeparator",!1,e.paragraphTag),T=window.getComputedStyle(document.body).fontFamily;const I=_(()=>e.toolbarBg?` bg-${e.toolbarBg}`:""),V=_(()=>{const f=e.toolbarOutline!==!0&&e.toolbarPush!==!0;return{type:"a",flat:f,noWrap:!0,outline:e.toolbarOutline,push:e.toolbarPush,rounded:e.toolbarRounded,dense:!0,color:e.toolbarColor,disable:!x.value,size:"sm"}}),$=_(()=>{const f=i.lang.editor,v=i.iconSet.editor;return{bold:{cmd:"bold",icon:v.bold,tip:f.bold,key:66},italic:{cmd:"italic",icon:v.italic,tip:f.italic,key:73},strike:{cmd:"strikeThrough",icon:v.strikethrough,tip:f.strikethrough,key:83},underline:{cmd:"underline",icon:v.underline,tip:f.underline,key:85},unordered:{cmd:"insertUnorderedList",icon:v.unorderedList,tip:f.unorderedList},ordered:{cmd:"insertOrderedList",icon:v.orderedList,tip:f.orderedList},subscript:{cmd:"subscript",icon:v.subscript,tip:f.subscript,htmlTip:"x<subscript>2</subscript>"},superscript:{cmd:"superscript",icon:v.superscript,tip:f.superscript,htmlTip:"x<superscript>2</superscript>"},link:{cmd:"link",disable:B=>B.caret&&!B.caret.can("link"),icon:v.hyperlink,tip:f.hyperlink,key:76},fullscreen:{cmd:"fullscreen",icon:v.toggleFullscreen,tip:f.toggleFullscreen,key:70},viewsource:{cmd:"viewsource",icon:v.viewSource,tip:f.viewSource},quote:{cmd:"formatBlock",param:"BLOCKQUOTE",icon:v.quote,tip:f.quote,key:81},left:{cmd:"justifyLeft",icon:v.left,tip:f.left},center:{cmd:"justifyCenter",icon:v.center,tip:f.center},right:{cmd:"justifyRight",icon:v.right,tip:f.right},justify:{cmd:"justifyFull",icon:v.justify,tip:f.justify},print:{type:"no-state",cmd:"print",icon:v.print,tip:f.print,key:80},outdent:{type:"no-state",disable:B=>B.caret&&!B.caret.can("outdent"),cmd:"outdent",icon:v.outdent,tip:f.outdent},indent:{type:"no-state",disable:B=>B.caret&&!B.caret.can("indent"),cmd:"indent",icon:v.indent,tip:f.indent},removeFormat:{type:"no-state",cmd:"removeFormat",icon:v.removeFormat,tip:f.removeFormat},hr:{type:"no-state",cmd:"insertHorizontalRule",icon:v.hr,tip:f.hr},undo:{type:"no-state",cmd:"undo",icon:v.undo,tip:f.undo,key:90},redo:{type:"no-state",cmd:"redo",icon:v.redo,tip:f.redo,key:89},h1:{cmd:"formatBlock",param:"H1",icon:v.heading1||v.heading,tip:f.heading1,htmlTip:`<h1 class="q-ma-none">${f.heading1}</h1>`},h2:{cmd:"formatBlock",param:"H2",icon:v.heading2||v.heading,tip:f.heading2,htmlTip:`<h2 class="q-ma-none">${f.heading2}</h2>`},h3:{cmd:"formatBlock",param:"H3",icon:v.heading3||v.heading,tip:f.heading3,htmlTip:`<h3 class="q-ma-none">${f.heading3}</h3>`},h4:{cmd:"formatBlock",param:"H4",icon:v.heading4||v.heading,tip:f.heading4,htmlTip:`<h4 class="q-ma-none">${f.heading4}</h4>`},h5:{cmd:"formatBlock",param:"H5",icon:v.heading5||v.heading,tip:f.heading5,htmlTip:`<h5 class="q-ma-none">${f.heading5}</h5>`},h6:{cmd:"formatBlock",param:"H6",icon:v.heading6||v.heading,tip:f.heading6,htmlTip:`<h6 class="q-ma-none">${f.heading6}</h6>`},p:{cmd:"formatBlock",param:e.paragraphTag,icon:v.heading,tip:f.paragraph},code:{cmd:"formatBlock",param:"PRE",icon:v.code,htmlTip:`<code>${f.code}</code>`},"size-1":{cmd:"fontSize",param:"1",icon:v.size1||v.size,tip:f.size1,htmlTip:`<font size="1">${f.size1}</font>`},"size-2":{cmd:"fontSize",param:"2",icon:v.size2||v.size,tip:f.size2,htmlTip:`<font size="2">${f.size2}</font>`},"size-3":{cmd:"fontSize",param:"3",icon:v.size3||v.size,tip:f.size3,htmlTip:`<font size="3">${f.size3}</font>`},"size-4":{cmd:"fontSize",param:"4",icon:v.size4||v.size,tip:f.size4,htmlTip:`<font size="4">${f.size4}</font>`},"size-5":{cmd:"fontSize",param:"5",icon:v.size5||v.size,tip:f.size5,htmlTip:`<font size="5">${f.size5}</font>`},"size-6":{cmd:"fontSize",param:"6",icon:v.size6||v.size,tip:f.size6,htmlTip:`<font size="6">${f.size6}</font>`},"size-7":{cmd:"fontSize",param:"7",icon:v.size7||v.size,tip:f.size7,htmlTip:`<font size="7">${f.size7}</font>`}}}),m=_(()=>{const f=e.definitions||{},v=e.definitions||e.fonts?hn(!0,{},$.value,f,Ea(T,i.lang.editor.defaultFont,i.iconSet.editor.font,e.fonts)):$.value;return e.toolbar.map(B=>B.map(E=>{if(E.options)return{type:"dropdown",icon:E.icon,label:E.label,size:"sm",dense:!0,fixedLabel:E.fixedLabel,fixedIcon:E.fixedIcon,highlight:E.highlight,list:E.list,options:E.options.map(Q=>v[Q])};const te=v[E];return te?te.type==="no-state"||f[E]&&(te.cmd===void 0||$.value[te.cmd]&&$.value[te.cmd].type==="no-state")?te:Object.assign({type:"toggle"},te):{type:"slot",slot:E}}))}),O={$q:i,props:e,slots:t,emit:a,inFullscreen:u,toggleFullscreen:c,runCmd:ke,isViewingSource:M,editLinkUrl:w,toolbarBackgroundClass:I,buttonProps:V,contentRef:s,buttons:m,setContent:ie};ne(()=>e.modelValue,f=>{k!==f&&(k=f,ie(f,!0))}),ne(w,f=>{a(`link${f?"Show":"Hide"}`)});const W=_(()=>e.toolbar&&e.toolbar.length!==0),G=_(()=>{const f={},v=B=>{B.key&&(f[B.key]={cmd:B.cmd,param:B.param})};return m.value.forEach(B=>{B.forEach(E=>{E.options?E.options.forEach(v):v(E)})}),f}),de=_(()=>u.value?e.contentStyle:[{minHeight:e.minHeight,height:e.height,maxHeight:e.maxHeight},e.contentStyle]),ce=_(()=>`q-editor q-editor--${M.value===!0?"source":"default"}`+(e.disable===!0?" disabled":"")+(u.value===!0?" fullscreen column":"")+(e.square===!0?" q-editor--square no-border-radius":"")+(e.flat===!0?" q-editor--flat":"")+(e.dense===!0?" q-editor--dense":"")+(r.value===!0?" q-editor--dark q-dark":"")),fe=_(()=>[e.contentClass,"q-editor__content",{col:u.value,"overflow-auto":u.value||e.maxHeight}]),R=_(()=>e.disable===!0?{"aria-disabled":"true"}:{});function Te(){if(s.value!==null){const f=`inner${M.value===!0?"Text":"HTML"}`,v=s.value[f];v!==e.modelValue&&(k=v,a("update:modelValue",v))}}function q(f){if(a("keydown",f),f.ctrlKey!==!0||tn(f)===!0){re();return}const v=f.keyCode,B=G.value[v];if(B!==void 0){const{cmd:E,param:te}=B;Le(f),ke(E,te,!1)}}function A(f){re(),a("click",f)}function Z(f){if(s.value!==null){const{scrollTop:v,scrollHeight:B}=s.value;C=B-v}O.caret.save(),a("blur",f)}function oe(f){Re(()=>{s.value!==null&&C!==void 0&&(s.value.scrollTop=s.value.scrollHeight-C)}),a("focus",f)}function X(f){const v=h.value;if(v!==null&&v.contains(f.target)===!0&&(f.relatedTarget===null||v.contains(f.relatedTarget)!==!0)){const B=`inner${M.value===!0?"Text":"HTML"}`;O.caret.restorePosition(s.value[B].length),re()}}function me(f){const v=h.value;v!==null&&v.contains(f.target)===!0&&(f.relatedTarget===null||v.contains(f.relatedTarget)!==!0)&&(O.caret.savePosition(),re())}function pe(){C=void 0}function Ce(f){O.caret.save()}function ie(f,v){if(s.value!==null){v===!0&&O.caret.savePosition();const B=`inner${M.value===!0?"Text":"HTML"}`;s.value[B]=f,v===!0&&(O.caret.restorePosition(s.value[B].length),re())}}function ke(f,v,B=!0){Pe(),O.caret.restore(),O.caret.apply(f,v,()=>{Pe(),O.caret.save(),B&&re()})}function re(){setTimeout(()=>{w.value=null,o.$forceUpdate()},1)}function Pe(){Kn(()=>{s.value!==null&&s.value.focus({preventScroll:!0})})}function Ne(){return s.value}return Ie(()=>{O.caret=o.caret=new Ba(s.value,O),ie(e.modelValue),re(),document.addEventListener("selectionchange",Ce)}),Zn(()=>{document.removeEventListener("selectionchange",Ce)}),Object.assign(o,{runCmd:ke,refreshToolbar:re,focus:Pe,getContentEl:Ne}),()=>{let f;if(W.value){const v=[g("div",{key:"qedt_top",class:"q-editor__toolbar row no-wrap scroll-x"+I.value},za(O))];w.value!==null&&v.push(g("div",{key:"qedt_btm",class:"q-editor__toolbar row no-wrap items-center scroll-x"+I.value},ja(O))),f=g("div",{key:"toolbar_ctainer",class:"q-editor__toolbars-container"},v)}return g("div",{ref:h,class:ce.value,style:{height:u.value===!0?"100%":null},...R.value,onFocusin:X,onFocusout:me},[f,g("div",{ref:s,style:de.value,class:fe.value,contenteditable:x.value,placeholder:e.placeholder,...p.listeners.value,onInput:Te,onKeydown:q,onClick:A,onBlur:Z,onFocus:oe,onMousedown:pe,onTouchstartPassive:pe})])}}});const ge=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function Ra(e,t,a){return Object.prototype.toString.call(e)==="[object Date]"&&(a=e.getDate(),t=e.getMonth()+1,e=e.getFullYear()),Ka(gt(e,t,a))}function Et(e,t,a){return pn(Za(e,t,a))}function Qa(e){return Ua(e)===0}function Ve(e,t){return t<=6?31:t<=11||Qa(e)?30:29}function Ua(e){const t=ge.length;let a=ge[0],o,i,r,u,c;if(e<a||e>=ge[t-1])throw new Error("Invalid Jalaali year "+e);for(c=1;c<t&&(o=ge[c],i=o-a,!(e<o));c+=1)a=o;return u=e-a,i-u<6&&(u=u-i+L(i+4,33)*33),r=J(J(u+1,33)-1,4),r===-1&&(r=4),r}function gn(e,t){const a=ge.length,o=e+621;let i=-14,r=ge[0],u,c,p,h,s;if(e<r||e>=ge[a-1])throw new Error("Invalid Jalaali year "+e);for(s=1;s<a&&(u=ge[s],c=u-r,!(e<u));s+=1)i=i+L(c,33)*8+L(J(c,33),4),r=u;h=e-r,i=i+L(h,33)*8+L(J(h,33)+3,4),J(c,33)===4&&c-h===4&&(i+=1);const w=L(o,4)-L((L(o,100)+1)*3,4)-150,M=20+i-w;return t||(c-h<6&&(h=h-c+L(c+4,33)*33),p=J(J(h+1,33)-1,4),p===-1&&(p=4)),{leap:p,gy:o,march:M}}function Za(e,t,a){const o=gn(e,!0);return gt(o.gy,3,o.march)+(t-1)*31-L(t,7)*(t-7)+a-1}function Ka(e){const t=pn(e).gy;let a=t-621,o,i,r;const u=gn(a,!1),c=gt(t,3,u.march);if(r=e-c,r>=0){if(r<=185)return i=1+L(r,31),o=J(r,31)+1,{jy:a,jm:i,jd:o};r-=186}else a-=1,r+=179,u.leap===1&&(r+=1);return i=7+L(r,30),o=J(r,30)+1,{jy:a,jm:i,jd:o}}function gt(e,t,a){let o=L((e+L(t-8,6)+100100)*1461,4)+L(153*J(t+9,12)+2,5)+a-34840408;return o=o-L(L(e+100100+L(t-8,6),100)*3,4)+752,o}function pn(e){let t=4*e+139361631;t=t+L(L(4*e+183187720,146097)*3,4)*4-3908;const a=L(J(t,1461),4)*5+308,o=L(J(a,153),5)+1,i=J(L(a,153),12)+1;return{gy:L(t,1461)-100100+L(8-i,6),gm:i,gd:o}}function L(e,t){return~~(e/t)}function J(e,t){return e-~~(e/t)*t}const Wa=["gregorian","persian"],jt={mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Wa.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Xa=["update:modelValue"];function ve(e){return e.year+"/"+z(e.month)+"/"+z(e.day)}function Ja(e,t){const a=_(()=>e.disable!==!0&&e.readonly!==!0),o=_(()=>a.value===!0?0:-1),i=_(()=>{const c=[];return e.color!==void 0&&c.push(`bg-${e.color}`),e.textColor!==void 0&&c.push(`text-${e.textColor}`),c.join(" ")});function r(){return e.locale!==void 0?{...t.lang.date,...e.locale}:t.lang.date}function u(c){const p=new Date,h=c===!0?null:0;if(e.calendar==="persian"){const s=Ra(p);return{year:s.jy,month:s.jm,day:s.jd}}return{year:p.getFullYear(),month:p.getMonth()+1,day:p.getDate(),hour:h,minute:h,second:h,millisecond:h}}return{editable:a,tabindex:o,headerClass:i,getLocale:r,getCurrentDate:u}}const yn=864e5,Ga=36e5,ut=6e4,bn="YYYY-MM-DDTHH:mm:ss.SSSZ",eo=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,to=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,it={};function no(e,t){const a="("+t.days.join("|")+")",o=e+a;if(it[o]!==void 0)return it[o];const i="("+t.daysShort.join("|")+")",r="("+t.months.join("|")+")",u="("+t.monthsShort.join("|")+")",c={};let p=0;const h=e.replace(to,w=>{switch(p++,w){case"YY":return c.YY=p,"(-?\\d{1,2})";case"YYYY":return c.YYYY=p,"(-?\\d{1,4})";case"M":return c.M=p,"(\\d{1,2})";case"MM":return c.M=p,"(\\d{2})";case"MMM":return c.MMM=p,u;case"MMMM":return c.MMMM=p,r;case"D":return c.D=p,"(\\d{1,2})";case"Do":return c.D=p++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return c.D=p,"(\\d{2})";case"H":return c.H=p,"(\\d{1,2})";case"HH":return c.H=p,"(\\d{2})";case"h":return c.h=p,"(\\d{1,2})";case"hh":return c.h=p,"(\\d{2})";case"m":return c.m=p,"(\\d{1,2})";case"mm":return c.m=p,"(\\d{2})";case"s":return c.s=p,"(\\d{1,2})";case"ss":return c.s=p,"(\\d{2})";case"S":return c.S=p,"(\\d{1})";case"SS":return c.S=p,"(\\d{2})";case"SSS":return c.S=p,"(\\d{3})";case"A":return c.A=p,"(AM|PM)";case"a":return c.a=p,"(am|pm)";case"aa":return c.aa=p,"(a\\.m\\.|p\\.m\\.)";case"ddd":return i;case"dddd":return a;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return c.Z=p,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return c.ZZ=p,"(Z|[+-]\\d{2}\\d{2})";case"X":return c.X=p,"(-?\\d+)";case"x":return c.x=p,"(-?\\d{4,})";default:return p--,w[0]==="["&&(w=w.substring(1,w.length-1)),w.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),s={map:c,regex:new RegExp("^"+h)};return it[o]=s,s}function wn(e,t){return e!==void 0?e:t!==void 0?t.date:Wn.date}function Ft(e,t=""){const a=e>0?"-":"+",o=Math.abs(e),i=Math.floor(o/60),r=o%60;return a+z(i)+t+z(r)}function ao(e,t,a,o,i){const r={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(i!==void 0&&Object.assign(r,i),e==null||e===""||typeof e!="string")return r;t===void 0&&(t=bn);const u=wn(a,nn.props),c=u.months,p=u.monthsShort,{regex:h,map:s}=no(t,u),w=e.match(h);if(w===null)return r;let M="";if(s.X!==void 0||s.x!==void 0){const x=parseInt(w[s.X!==void 0?s.X:s.x],10);if(isNaN(x)===!0||x<0)return r;const T=new Date(x*(s.X!==void 0?1e3:1));r.year=T.getFullYear(),r.month=T.getMonth()+1,r.day=T.getDate(),r.hour=T.getHours(),r.minute=T.getMinutes(),r.second=T.getSeconds(),r.millisecond=T.getMilliseconds()}else{if(s.YYYY!==void 0)r.year=parseInt(w[s.YYYY],10);else if(s.YY!==void 0){const x=parseInt(w[s.YY],10);r.year=x<0?x:2e3+x}if(s.M!==void 0){if(r.month=parseInt(w[s.M],10),r.month<1||r.month>12)return r}else s.MMM!==void 0?r.month=p.indexOf(w[s.MMM])+1:s.MMMM!==void 0&&(r.month=c.indexOf(w[s.MMMM])+1);if(s.D!==void 0){if(r.day=parseInt(w[s.D],10),r.year===null||r.month===null||r.day<1)return r;const x=o!=="persian"?new Date(r.year,r.month,0).getDate():Ve(r.year,r.month);if(r.day>x)return r}s.H!==void 0?r.hour=parseInt(w[s.H],10)%24:s.h!==void 0&&(r.hour=parseInt(w[s.h],10)%12,(s.A&&w[s.A]==="PM"||s.a&&w[s.a]==="pm"||s.aa&&w[s.aa]==="p.m.")&&(r.hour+=12),r.hour=r.hour%24),s.m!==void 0&&(r.minute=parseInt(w[s.m],10)%60),s.s!==void 0&&(r.second=parseInt(w[s.s],10)%60),s.S!==void 0&&(r.millisecond=parseInt(w[s.S],10)*10**(3-w[s.S].length)),(s.Z!==void 0||s.ZZ!==void 0)&&(M=s.Z!==void 0?w[s.Z].replace(":",""):w[s.ZZ],r.timezoneOffset=(M[0]==="+"?-1:1)*(60*M.slice(1,3)+1*M.slice(3,5)))}return r.dateHash=z(r.year,6)+"/"+z(r.month)+"/"+z(r.day),r.timeHash=z(r.hour)+":"+z(r.minute)+":"+z(r.second)+M,r}function Lt(e){const t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);const a=new Date(t.getFullYear(),0,4);a.setDate(a.getDate()-(a.getDay()+6)%7+3);const o=t.getTimezoneOffset()-a.getTimezoneOffset();t.setHours(t.getHours()-o);const i=(t-a)/(yn*7);return 1+Math.floor(i)}function se(e,t,a){const o=new Date(e),i=`set${a===!0?"UTC":""}`;switch(t){case"year":case"years":o[`${i}Month`](0);case"month":case"months":o[`${i}Date`](1);case"day":case"days":case"date":o[`${i}Hours`](0);case"hour":case"hours":o[`${i}Minutes`](0);case"minute":case"minutes":o[`${i}Seconds`](0);case"second":case"seconds":o[`${i}Milliseconds`](0)}return o}function Fe(e,t,a){return(e.getTime()-e.getTimezoneOffset()*ut-(t.getTime()-t.getTimezoneOffset()*ut))/a}function _n(e,t,a="days"){const o=new Date(e),i=new Date(t);switch(a){case"years":case"year":return o.getFullYear()-i.getFullYear();case"months":case"month":return(o.getFullYear()-i.getFullYear())*12+o.getMonth()-i.getMonth();case"days":case"day":case"date":return Fe(se(o,"day"),se(i,"day"),yn);case"hours":case"hour":return Fe(se(o,"hour"),se(i,"hour"),Ga);case"minutes":case"minute":return Fe(se(o,"minute"),se(i,"minute"),ut);case"seconds":case"second":return Fe(se(o,"second"),se(i,"second"),1e3)}}function Vt(e){return _n(e,se(e,"year"),"days")+1}function Rt(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const Qt={YY(e,t,a){const o=this.YYYY(e,t,a)%100;return o>=0?z(o):"-"+z(Math.abs(o))},YYYY(e,t,a){return a!=null?a:e.getFullYear()},M(e){return e.getMonth()+1},MM(e){return z(e.getMonth()+1)},MMM(e,t){return t.monthsShort[e.getMonth()]},MMMM(e,t){return t.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return Rt(this.Q(e))},D(e){return e.getDate()},Do(e){return Rt(e.getDate())},DD(e){return z(e.getDate())},DDD(e){return Vt(e)},DDDD(e){return z(Vt(e),3)},d(e){return e.getDay()},dd(e,t){return this.dddd(e,t).slice(0,2)},ddd(e,t){return t.daysShort[e.getDay()]},dddd(e,t){return t.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return Lt(e)},ww(e){return z(Lt(e))},H(e){return e.getHours()},HH(e){return z(e.getHours())},h(e){const t=e.getHours();return t===0?12:t>12?t%12:t},hh(e){return z(this.h(e))},m(e){return e.getMinutes()},mm(e){return z(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return z(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return z(Math.floor(e.getMilliseconds()/10))},SSS(e){return z(e.getMilliseconds(),3)},A(e){return this.H(e)<12?"AM":"PM"},a(e){return this.H(e)<12?"am":"pm"},aa(e){return this.H(e)<12?"a.m.":"p.m."},Z(e,t,a,o){const i=o==null?e.getTimezoneOffset():o;return Ft(i,":")},ZZ(e,t,a,o){const i=o==null?e.getTimezoneOffset():o;return Ft(i)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function oo(e,t,a,o,i){if(e!==0&&!e||e===1/0||e===-1/0)return;const r=new Date(e);if(isNaN(r))return;t===void 0&&(t=bn);const u=wn(a,nn.props);return t.replace(eo,(c,p)=>c in Qt?Qt[c](r,u,o,i):p===void 0?c:p.split("\\]").join("]"))}const be=20,ro=["Calendar","Years","Months"],Ut=e=>ro.includes(e),st=e=>/^-?[\d]+\/[0-1]\d$/.test(e),De=" \u2014 ";function he(e){return e.year+"/"+z(e.month)}var Zt=_e({name:"QDate",props:{...jt,...Xn,...dt,modelValue:{required:!0,validator:e=>typeof e=="string"||Array.isArray(e)===!0||Object(e)===e||e===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...jt.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:st},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:st},navigationMaxYearMonth:{type:String,validator:st},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Ut}},emits:[...Xa,"rangeStart","rangeEnd","navigation"],setup(e,{slots:t,emit:a}){const{proxy:o}=He(),{$q:i}=o,r=ct(e,i),{getCache:u}=dn(),{tabindex:c,headerClass:p,getLocale:h,getCurrentDate:s}=Ja(e,i);let w;const M=Jn(e),x=Gn(M),T=F(null),C=F(wt()),k=F(h()),I=_(()=>wt()),V=_(()=>h()),$=_(()=>s()),m=F(_t(C.value,k.value)),O=F(e.defaultView),W=_(()=>i.lang.rtl===!0?"right":"left"),G=F(W.value),de=F(W.value),ce=m.value.year,fe=F(ce-ce%be-(ce<0?be:0)),R=F(null),Te=_(()=>{const n=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${n} q-date--${n}-${e.minimal===!0?"minimal":"standard"}`+(r.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),q=_(()=>e.color||"primary"),A=_(()=>e.textColor||"white"),Z=_(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),oe=_(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),X=_(()=>oe.value.filter(n=>typeof n=="string").map(n=>We(n,C.value,k.value)).filter(n=>n.dateHash!==null&&n.day!==null&&n.month!==null&&n.year!==null)),me=_(()=>{const n=l=>We(l,C.value,k.value);return oe.value.filter(l=>ea(l)===!0&&l.from!==void 0&&l.to!==void 0).map(l=>({from:n(l.from),to:n(l.to)})).filter(l=>l.from.dateHash!==null&&l.to.dateHash!==null&&l.from.dateHash<l.to.dateHash)}),pe=_(()=>e.calendar!=="persian"?n=>new Date(n.year,n.month-1,n.day):n=>{const l=Et(n.year,n.month,n.day);return new Date(l.gy,l.gm-1,l.gd)}),Ce=_(()=>e.calendar==="persian"?ve:(n,l,d)=>oo(new Date(n.year,n.month-1,n.day,n.hour,n.minute,n.second,n.millisecond),l===void 0?C.value:l,d===void 0?k.value:d,n.year,n.timezoneOffset)),ie=_(()=>X.value.length+me.value.reduce((n,l)=>n+1+_n(pe.value(l.to),pe.value(l.from)),0)),ke=_(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(R.value!==null){const d=R.value.init,y=pe.value(d);return k.value.daysShort[y.getDay()]+", "+k.value.monthsShort[d.month-1]+" "+d.day+De+"?"}if(ie.value===0)return De;if(ie.value>1)return`${ie.value} ${k.value.pluralDay}`;const n=X.value[0],l=pe.value(n);return isNaN(l.valueOf())===!0?De:k.value.headerTitle!==void 0?k.value.headerTitle(l,n):k.value.daysShort[l.getDay()]+", "+k.value.monthsShort[n.month-1]+" "+n.day}),re=_(()=>X.value.concat(me.value.map(l=>l.from)).sort((l,d)=>l.year-d.year||l.month-d.month)[0]),Pe=_(()=>X.value.concat(me.value.map(l=>l.to)).sort((l,d)=>d.year-l.year||d.month-l.month)[0]),Ne=_(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(ie.value===0)return De;if(ie.value>1){const n=re.value,l=Pe.value,d=k.value.monthsShort;return d[n.month-1]+(n.year!==l.year?" "+n.year+De+d[l.month-1]+" ":n.month!==l.month?De+d[l.month-1]:"")+" "+l.year}return X.value[0].year}),f=_(()=>{const n=[i.iconSet.datetime.arrowLeft,i.iconSet.datetime.arrowRight];return i.lang.rtl===!0?n.reverse():n}),v=_(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):k.value.firstDayOfWeek),B=_(()=>{const n=k.value.daysShort,l=v.value;return l>0?n.slice(l,7).concat(n.slice(0,l)):n}),E=_(()=>{const n=m.value;return e.calendar!=="persian"?new Date(n.year,n.month,0).getDate():Ve(n.year,n.month)}),te=_(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),Q=_(()=>{if(e.navigationMinYearMonth===void 0)return null;const n=e.navigationMinYearMonth.split("/");return{year:parseInt(n[0],10),month:parseInt(n[1],10)}}),K=_(()=>{if(e.navigationMaxYearMonth===void 0)return null;const n=e.navigationMaxYearMonth.split("/");return{year:parseInt(n[0],10),month:parseInt(n[1],10)}}),Ze=_(()=>{const n={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return Q.value!==null&&Q.value.year>=m.value.year&&(n.year.prev=!1,Q.value.year===m.value.year&&Q.value.month>=m.value.month&&(n.month.prev=!1)),K.value!==null&&K.value.year<=m.value.year&&(n.year.next=!1,K.value.year===m.value.year&&K.value.month<=m.value.month&&(n.month.next=!1)),n}),ze=_(()=>{const n={};return X.value.forEach(l=>{const d=he(l);n[d]===void 0&&(n[d]=[]),n[d].push(l.day)}),n}),pt=_(()=>{const n={};return me.value.forEach(l=>{const d=he(l.from),y=he(l.to);if(n[d]===void 0&&(n[d]=[]),n[d].push({from:l.from.day,to:d===y?l.to.day:void 0,range:l}),d<y){let b;const{year:Y,month:S}=l.from,P=S<12?{year:Y,month:S+1}:{year:Y+1,month:1};for(;(b=he(P))<=y;)n[b]===void 0&&(n[b]=[]),n[b].push({from:void 0,to:b===y?l.to.day:void 0,range:l}),P.month++,P.month>12&&(P.year++,P.month=1)}}),n}),Oe=_(()=>{if(R.value===null)return;const{init:n,initHash:l,final:d,finalHash:y}=R.value,[b,Y]=l<=y?[n,d]:[d,n],S=he(b),P=he(Y);if(S!==ee.value&&P!==ee.value)return;const j={};return S===ee.value?(j.from=b.day,j.includeFrom=!0):j.from=1,P===ee.value?(j.to=Y.day,j.includeTo=!0):j.to=E.value,j}),ee=_(()=>he(m.value)),Sn=_(()=>{const n={};if(e.options===void 0){for(let d=1;d<=E.value;d++)n[d]=!0;return n}const l=typeof e.options=="function"?e.options:d=>e.options.includes(d);for(let d=1;d<=E.value;d++){const y=ee.value+"/"+z(d);n[d]=l(y)}return n}),xn=_(()=>{const n={};if(e.events===void 0)for(let l=1;l<=E.value;l++)n[l]=!1;else{const l=typeof e.events=="function"?e.events:d=>e.events.includes(d);for(let d=1;d<=E.value;d++){const y=ee.value+"/"+z(d);n[d]=l(y)===!0&&te.value(y)}}return n}),Dn=_(()=>{let n,l;const{year:d,month:y}=m.value;if(e.calendar!=="persian")n=new Date(d,y-1,1),l=new Date(d,y-1,0).getDate();else{const b=Et(d,y,1);n=new Date(b.gy,b.gm-1,b.gd);let Y=y-1,S=d;Y===0&&(Y=12,S--),l=Ve(S,Y)}return{days:n.getDay()-v.value-1,endDay:l}}),yt=_(()=>{const n=[],{days:l,endDay:d}=Dn.value,y=l<0?l+7:l;if(y<6)for(let S=d-y;S<=d;S++)n.push({i:S,fill:!0});const b=n.length;for(let S=1;S<=E.value;S++){const P={i:S,event:xn.value[S],classes:[]};Sn.value[S]===!0&&(P.in=!0,P.flat=!0),n.push(P)}if(ze.value[ee.value]!==void 0&&ze.value[ee.value].forEach(S=>{const P=b+S-1;Object.assign(n[P],{selected:!0,unelevated:!0,flat:!1,color:q.value,textColor:A.value})}),pt.value[ee.value]!==void 0&&pt.value[ee.value].forEach(S=>{if(S.from!==void 0){const P=b+S.from-1,j=b+(S.to||E.value)-1;for(let Be=P;Be<=j;Be++)Object.assign(n[Be],{range:S.range,unelevated:!0,color:q.value,textColor:A.value});Object.assign(n[P],{rangeFrom:!0,flat:!1}),S.to!==void 0&&Object.assign(n[j],{rangeTo:!0,flat:!1})}else if(S.to!==void 0){const P=b+S.to-1;for(let j=b;j<=P;j++)Object.assign(n[j],{range:S.range,unelevated:!0,color:q.value,textColor:A.value});Object.assign(n[P],{flat:!1,rangeTo:!0})}else{const P=b+E.value-1;for(let j=b;j<=P;j++)Object.assign(n[j],{range:S.range,unelevated:!0,color:q.value,textColor:A.value})}}),Oe.value!==void 0){const S=b+Oe.value.from-1,P=b+Oe.value.to-1;for(let j=S;j<=P;j++)n[j].color=q.value,n[j].editRange=!0;Oe.value.includeFrom===!0&&(n[S].editRangeFrom=!0),Oe.value.includeTo===!0&&(n[P].editRangeTo=!0)}m.value.year===$.value.year&&m.value.month===$.value.month&&(n[b+$.value.day-1].today=!0);const Y=n.length%7;if(Y>0){const S=7-Y;for(let P=1;P<=S;P++)n.push({i:P,fill:!0})}return n.forEach(S=>{let P="q-date__calendar-item ";S.fill===!0?P+="q-date__calendar-item--fill":(P+=`q-date__calendar-item--${S.in===!0?"in":"out"}`,S.range!==void 0&&(P+=` q-date__range${S.rangeTo===!0?"-to":S.rangeFrom===!0?"-from":""}`),S.editRange===!0&&(P+=` q-date__edit-range${S.editRangeFrom===!0?"-from":""}${S.editRangeTo===!0?"-to":""}`),(S.range!==void 0||S.editRange===!0)&&(P+=` text-${S.color}`)),S.classes=P}),n}),Mn=_(()=>e.disable===!0?{"aria-disabled":"true"}:{});ne(()=>e.modelValue,n=>{if(w===n)w=0;else{const l=_t(C.value,k.value);Se(l.year,l.month,l)}}),ne(O,()=>{T.value!==null&&o.$el.contains(document.activeElement)===!0&&T.value.focus()}),ne(()=>m.value.year+"|"+m.value.month,()=>{a("navigation",{year:m.value.year,month:m.value.month})}),ne(I,n=>{Dt(n,k.value,"mask"),C.value=n}),ne(V,n=>{Dt(C.value,n,"locale"),k.value=n});function bt(){const{year:n,month:l,day:d}=$.value,y={...m.value,year:n,month:l,day:d},b=ze.value[he(y)];(b===void 0||b.includes(y.day)===!1)&&Je(y),Ke(y.year,y.month)}function qn(n){Ut(n)===!0&&(O.value=n)}function Hn(n,l){["month","year"].includes(n)&&(n==="month"?kt:Xe)(l===!0?-1:1)}function Ke(n,l){O.value="Calendar",Se(n,l)}function Tn(n,l){if(e.range===!1||!n){R.value=null;return}const d=Object.assign({...m.value},n),y=l!==void 0?Object.assign({...m.value},l):d;R.value={init:d,initHash:ve(d),final:y,finalHash:ve(y)},Ke(d.year,d.month)}function wt(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function We(n,l,d){return ao(n,l,d,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function _t(n,l){const d=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(d.length===0)return Ct();const y=d[d.length-1],b=We(y.from!==void 0?y.from:y,n,l);return b.dateHash===null?Ct():b}function Ct(){let n,l;if(e.defaultYearMonth!==void 0){const d=e.defaultYearMonth.split("/");n=parseInt(d[0],10),l=parseInt(d[1],10)}else{const d=$.value!==void 0?$.value:s();n=d.year,l=d.month}return{year:n,month:l,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:n+"/"+z(l)+"/01"}}function kt(n){let l=m.value.year,d=Number(m.value.month)+n;d===13?(d=1,l++):d===0&&(d=12,l--),Se(l,d),Z.value===!0&&Ee("month")}function Xe(n){const l=Number(m.value.year)+n;Se(l,m.value.month),Z.value===!0&&Ee("year")}function Pn(n){Se(n,m.value.month),O.value=e.defaultView==="Years"?"Months":"Calendar",Z.value===!0&&Ee("year")}function On(n){Se(m.value.year,n),O.value="Calendar",Z.value===!0&&Ee("month")}function Bn(n,l){const d=ze.value[l];(d!==void 0&&d.includes(n.day)===!0?Ge:Je)(n)}function ye(n){return{year:n.year,month:n.month,day:n.day}}function Se(n,l,d){if(Q.value!==null&&n<=Q.value.year&&((l<Q.value.month||n<Q.value.year)&&(l=Q.value.month),n=Q.value.year),K.value!==null&&n>=K.value.year&&((l>K.value.month||n>K.value.year)&&(l=K.value.month),n=K.value.year),d!==void 0){const{hour:b,minute:Y,second:S,millisecond:P,timezoneOffset:j,timeHash:Be}=d;Object.assign(m.value,{hour:b,minute:Y,second:S,millisecond:P,timezoneOffset:j,timeHash:Be})}const y=n+"/"+z(l)+"/01";y!==m.value.dateHash&&(G.value=m.value.dateHash<y==(i.lang.rtl!==!0)?"left":"right",n!==m.value.year&&(de.value=G.value),Re(()=>{fe.value=n-n%be-(n<0?be:0),Object.assign(m.value,{year:n,month:l,day:1,dateHash:y})}))}function St(n,l,d){const y=n!==null&&n.length===1&&e.multiple===!1?n[0]:n;w=y;const{reason:b,details:Y}=xt(l,d);a("update:modelValue",y,b,Y)}function Ee(n){const l=X.value[0]!==void 0&&X.value[0].dateHash!==null?{...X.value[0]}:{...m.value};Re(()=>{l.year=m.value.year,l.month=m.value.month;const d=e.calendar!=="persian"?new Date(l.year,l.month,0).getDate():Ve(l.year,l.month);l.day=Math.min(Math.max(1,l.day),d);const y=xe(l);w=y;const{details:b}=xt("",l);a("update:modelValue",y,n,b)})}function xt(n,l){return l.from!==void 0?{reason:`${n}-range`,details:{...ye(l.target),from:ye(l.from),to:ye(l.to)}}:{reason:`${n}-day`,details:ye(l)}}function xe(n,l,d){return n.from!==void 0?{from:Ce.value(n.from,l,d),to:Ce.value(n.to,l,d)}:Ce.value(n,l,d)}function Je(n){let l;if(e.multiple===!0)if(n.from!==void 0){const d=ve(n.from),y=ve(n.to),b=X.value.filter(S=>S.dateHash<d||S.dateHash>y),Y=me.value.filter(({from:S,to:P})=>P.dateHash<d||S.dateHash>y);l=b.concat(Y).concat(n).map(S=>xe(S))}else{const d=oe.value.slice();d.push(xe(n)),l=d}else l=xe(n);St(l,"add",n)}function Ge(n){if(e.noUnset===!0)return;let l=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const d=xe(n);n.from!==void 0?l=e.modelValue.filter(y=>y.from!==void 0?y.from!==d.from&&y.to!==d.to:!0):l=e.modelValue.filter(y=>y!==d),l.length===0&&(l=null)}St(l,"remove",n)}function Dt(n,l,d){const y=X.value.concat(me.value).map(b=>xe(b,n,l)).filter(b=>b.from!==void 0?b.from.dateHash!==null&&b.to.dateHash!==null:b.dateHash!==null);a("update:modelValue",(e.multiple===!0?y:y[0])||null,d)}function Yn(){if(e.minimal!==!0)return g("div",{class:"q-date__header "+p.value},[g("div",{class:"relative-position"},[g(Me,{name:"q-transition--fade"},()=>g("div",{key:"h-yr-"+Ne.value,class:"q-date__header-subtitle q-date__header-link "+(O.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:c.value,...u("vY",{onClick(){O.value="Years"},onKeyup(n){n.keyCode===13&&(O.value="Years")}})},[Ne.value]))]),g("div",{class:"q-date__header-title relative-position flex no-wrap"},[g("div",{class:"relative-position col"},[g(Me,{name:"q-transition--fade"},()=>g("div",{key:"h-sub"+ke.value,class:"q-date__header-title-label q-date__header-link "+(O.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:c.value,...u("vC",{onClick(){O.value="Calendar"},onKeyup(n){n.keyCode===13&&(O.value="Calendar")}})},[ke.value]))]),e.todayBtn===!0?g(U,{class:"q-date__header-today self-start",icon:i.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:c.value,onClick:bt}):null])])}function et({label:n,type:l,key:d,dir:y,goTo:b,boundaries:Y,cls:S}){return[g("div",{class:"row items-center q-date__arrow"},[g(U,{round:!0,dense:!0,size:"sm",flat:!0,icon:f.value[0],tabindex:c.value,disable:Y.prev===!1,...u("go-#"+l,{onClick(){b(-1)}})})]),g("div",{class:"relative-position overflow-hidden flex flex-center"+S},[g(Me,{name:"q-transition--jump-"+y},()=>g("div",{key:d},[g(U,{flat:!0,dense:!0,noCaps:!0,label:n,tabindex:c.value,...u("view#"+l,{onClick:()=>{O.value=l}})})]))]),g("div",{class:"row items-center q-date__arrow"},[g(U,{round:!0,dense:!0,size:"sm",flat:!0,icon:f.value[1],tabindex:c.value,disable:Y.next===!1,...u("go+#"+l,{onClick(){b(1)}})})])]}const $n={Calendar:()=>[g("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[g("div",{class:"q-date__navigation row items-center no-wrap"},et({label:k.value.months[m.value.month-1],type:"Months",key:m.value.month,dir:G.value,goTo:kt,boundaries:Ze.value.month,cls:" col"}).concat(et({label:m.value.year,type:"Years",key:m.value.year,dir:de.value,goTo:Xe,boundaries:Ze.value.year,cls:""}))),g("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},B.value.map(n=>g("div",{class:"q-date__calendar-item"},[g("div",n)]))),g("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[g(Me,{name:"q-transition--slide-"+G.value},()=>g("div",{key:ee.value,class:"q-date__calendar-days fit"},yt.value.map(n=>g("div",{class:n.classes},[n.in===!0?g(U,{class:n.today===!0?"q-date__today":"",dense:!0,flat:n.flat,unelevated:n.unelevated,color:n.color,textColor:n.textColor,label:n.i,tabindex:c.value,...u("day#"+n.i,{onClick:()=>{An(n.i)},onMouseover:()=>{In(n.i)}})},n.event!==!1?()=>g("div",{class:"q-date__event bg-"+n.event}):null):g("div",""+n.i)]))))])])],Months(){const n=m.value.year===$.value.year,l=y=>Q.value!==null&&m.value.year===Q.value.year&&Q.value.month>y||K.value!==null&&m.value.year===K.value.year&&K.value.month<y,d=k.value.monthsShort.map((y,b)=>{const Y=m.value.month===b+1;return g("div",{class:"q-date__months-item flex flex-center"},[g(U,{class:n===!0&&$.value.month===b+1?"q-date__today":null,flat:Y!==!0,label:y,unelevated:Y,color:Y===!0?q.value:null,textColor:Y===!0?A.value:null,tabindex:c.value,disable:l(b+1),...u("month#"+b,{onClick:()=>{On(b+1)}})})])});return e.yearsInMonthView===!0&&d.unshift(g("div",{class:"row no-wrap full-width"},[et({label:m.value.year,type:"Years",key:m.value.year,dir:de.value,goTo:Xe,boundaries:Ze.value.year,cls:" col"})])),g("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},d)},Years(){const n=fe.value,l=n+be,d=[],y=b=>Q.value!==null&&Q.value.year>b||K.value!==null&&K.value.year<b;for(let b=n;b<=l;b++){const Y=m.value.year===b;d.push(g("div",{class:"q-date__years-item flex flex-center"},[g(U,{key:"yr"+b,class:$.value.year===b?"q-date__today":null,flat:!Y,label:b,dense:!0,unelevated:Y,color:Y===!0?q.value:null,textColor:Y===!0?A.value:null,tabindex:c.value,disable:y(b),...u("yr#"+b,{onClick:()=>{Pn(b)}})})]))}return g("div",{class:"q-date__view q-date__years flex flex-center"},[g("div",{class:"col-auto"},[g(U,{round:!0,dense:!0,flat:!0,icon:f.value[0],tabindex:c.value,disable:y(n),...u("y-",{onClick:()=>{fe.value-=be}})})]),g("div",{class:"q-date__years-content col self-stretch row items-center"},d),g("div",{class:"col-auto"},[g(U,{round:!0,dense:!0,flat:!0,icon:f.value[1],tabindex:c.value,disable:y(l),...u("y+",{onClick:()=>{fe.value+=be}})})])])}};function An(n){const l={...m.value,day:n};if(e.range===!1){Bn(l,ee.value);return}if(R.value===null){const d=yt.value.find(b=>b.fill!==!0&&b.i===n);if(e.noUnset!==!0&&d.range!==void 0){Ge({target:l,from:d.range.from,to:d.range.to});return}if(d.selected===!0){Ge(l);return}const y=ve(l);R.value={init:l,initHash:y,final:l,finalHash:y},a("rangeStart",ye(l))}else{const d=R.value.initHash,y=ve(l),b=d<=y?{from:R.value.init,to:l}:{from:l,to:R.value.init};R.value=null,Je(d===y?l:{target:l,...b}),a("rangeEnd",{from:ye(b.from),to:ye(b.to)})}}function In(n){if(R.value!==null){const l={...m.value,day:n};Object.assign(R.value,{final:l,finalHash:ve(l)})}}return Object.assign(o,{setToday:bt,setView:qn,offsetCalendar:Hn,setCalendarTo:Ke,setEditingRange:Tn}),()=>{const n=[g("div",{class:"q-date__content col relative-position"},[g(Me,{name:"q-transition--fade"},$n[O.value])])],l=we(t.default);return l!==void 0&&n.push(g("div",{class:"q-date__actions"},l)),e.name!==void 0&&e.disable!==!0&&x(n,"push"),g("div",{class:Te.value,...Mn.value},[Yn(),g("div",{ref:T,class:"q-date__main col column",tabindex:-1},n)])}}}),Kt=_e({name:"QPopupProxy",props:{...pa,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:t,emit:a,attrs:o}){const{proxy:i}=He(),{$q:r}=i,u=F(!1),c=F(null),p=_(()=>parseInt(e.breakpoint,10)),{canShow:h}=ya({showing:u});function s(){return r.screen.width<p.value||r.screen.height<p.value?"dialog":"menu"}const w=F(s()),M=_(()=>w.value==="menu"?{maxHeight:"99vh"}:{});ne(()=>s(),C=>{u.value!==!0&&(w.value=C)});function x(C){u.value=!0,a("show",C)}function T(C){u.value=!1,w.value=s(),a("hide",C)}return Object.assign(i,{show(C){h(C)===!0&&c.value.show(C)},hide(C){c.value.hide(C)},toggle(C){c.value.toggle(C)}}),ta(i,"currentComponent",()=>({type:w.value,ref:c.value})),()=>{const C={ref:c,...M.value,...o,onShow:x,onHide:T};let k;return w.value==="dialog"?k=na:(k=un,Object.assign(C,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),g(k,C,t.default)}}});function lo(){return aa(oa)}var io=(e,t)=>{const a=e.__vccOpts||e;for(const[o,i]of t)a[o]=i;return a};const Cn=e=>(sa("data-v-6ff8dc11"),e=e(),ua(),e),so={class:"header"},uo={class:"text-h5 q-pa-sm text-bold"},co={key:0},fo={key:1},mo=Cn(()=>le("div",{class:"comment-header"},[le("div")],-1)),vo={class:"comment-text"},ho={class:"comment-actions"},go={class:"comment-input"},po=Cn(()=>le("span",{class:"text-primary"},"Processing ...",-1)),yo={__name:"CommentTemplate",props:{id:Number,type:String},setup(e){lo();const t=F("");F([]);const a=F(null),o=F(""),i=e,r=ft({title:"Comment",url:"custom-apps/comments"});r.hooksCycle.params.resolvedParams=I=>(I.params["filter[resource_id]"]=i.id,I.params["filter[resource_type]"]=i.type,I);const u=mt({title:"Comment",url:"custom-apps/comments",initialValues:{comment:""}}),{resetFetch:c,refresh:p,tableData:h,actions:s,loading:w}=r;s.pagination.update({rowsPerPage:20,descending:!1}),u.hooksCycle.afterResolve=I=>(I.resource_id=i.id,I.resource_type=i.type,I);function M(){u.actions.form.create,u.formData.value={comment:t.value},u.onCreate({emit:I=>{p(),t.value=""}})}function x(I,V){u.actions.formData.update({comment:o.value}),u.onUpdate({id:V,emit:$=>{p(),a.value=null,o.value=""}})}function T(I){r.deleteRecord(I)}function C(){a.value=null,o.value=""}const k=(I,V)=>{a.value=I,o.value=V};return Ie(()=>{p()}),(I,V)=>(ae(),Ae(on,{class:"q-pa-sm q-gutter-md"},{default:N(()=>[le("div",so,[H(wa,null,{default:N(()=>[le("span",uo,"Comments ("+Ht(D(h).length)+")",1)]),_:1})]),H(an),H(Ca,{class:"q-mb-md"},{default:N(()=>[(ae(!0),qe(ra,null,la(D(h),({comment:$,id:m},O)=>(ae(),Ae(vt,{key:O,class:"comment-bubble"},{default:N(()=>[H(Ue,null,{default:N(()=>[a.value===O?(ae(),qe("div",co,[H($e,{modelValue:o.value,"onUpdate:modelValue":V[1]||(V[1]=W=>o.value=W),placeholder:"Add a comment...",outlined:"",onKeyup:at(W=>x(O,m),["enter"]),dense:""},{append:N(()=>[H(ue,{name:"clear",class:"cursor-pointer",onClick:V[0]||(V[0]=W=>C())}),H(ue,{name:"save",class:"cursor-pointer text-blue",onClick:W=>x(O,m)},null,8,["onClick"])]),_:2},1032,["modelValue","onKeyup"])])):(ae(),qe("div",fo,[mo,le("div",vo,Ht($),1),le("div",ho,[H(ue,{name:"edit",class:"cursor-pointer",onClick:W=>k(O,$)},null,8,["onClick"]),H(ue,{name:"delete",class:"cursor-pointer text-red",onClick:W=>T(m)},null,8,["onClick"])])]))]),_:2},1024)]),_:2},1024))),128))]),_:1}),le("div",go,[H($e,{modelValue:t.value,"onUpdate:modelValue":V[2]||(V[2]=$=>t.value=$),placeholder:"Add a comment...",outlined:"",onKeydown:[at(Tt(M,["exact","prevent"]),["enter"]),V[3]||(V[3]=at(Tt($=>t.value+=`
`,["shift","exact","prevent"]),["enter"]))],dense:"",type:"textarea"},{append:N(()=>[H(ue,{name:"send",class:"cursor-pointer text-blue",onClick:M})]),_:1},8,["modelValue","onKeydown"])]),H(ha,{showing:D(w)},{default:N(()=>[H(ia,{size:"3em",thickness:2,color:"primary"}),po]),_:1},8,["showing"])]),_:1}))}};var bo=io(yo,[["__scopeId","data-v-6ff8dc11"]]);const wo={class:"row items-center justify-end"},_o={class:"row items-center justify-end"},kn={__name:"TaskFormTemplate",props:{formHooks:Object,hide:{type:Array,default:()=>[]}},setup(e){const{formHooks:t,hide:a}=e,{formData:o,formReadonly:i,formError:r,hooksCycle:u,actions:c}=t,p=[{label:"To do",value:"to-do"},{label:"In Progress",value:"in-progress"},{label:"Need Review",value:"need-review"},{label:"Complete",value:"complete"}],h=[{label:"Urgent",value:"urgent"},{label:"High",value:"high"},{label:"Normal",value:"normal"},{label:"Low",value:"low"}],s=ka({url:"custom-apps/milestones",map:T=>({label:T.title,value:T.id})});function w(T){return a.includes("milestone")||T.milestone&&(T.milestone_id=T.milestone.value),T}const M=u.afterResolve;u.afterResolve=T=>w(M(T));const x=F("comment");return(T,C)=>(ae(),qe("div",null,[H(_a,{class:"q-gutter-md q-mt-xs"},{default:N(()=>[H($e,{modelValue:D(o).name,"onUpdate:modelValue":C[0]||(C[0]=k=>D(o).name=k),filled:"",label:"Name *",outlined:"","hide-bottom-space":"",dense:"",readonly:D(i),"error-message":D(r).name,error:D(r).name!==void 0},null,8,["modelValue","readonly","error-message","error"]),H(Va,{modelValue:D(o).description,"onUpdate:modelValue":C[1]||(C[1]=k=>D(o).description=k),"min-height":"5rem",readonly:D(i)},null,8,["modelValue","readonly"]),H(ot,{modelValue:D(o).status,"onUpdate:modelValue":C[2]||(C[2]=k=>D(o).status=k),"error-message":D(r).status,error:D(r).status!==void 0,filled:"","hide-bottom-space":"",dense:"",options:p,label:"Status",readonly:D(i)},null,8,["modelValue","error-message","error","readonly"]),H($e,{filled:"",modelValue:D(o).start_date,"onUpdate:modelValue":C[4]||(C[4]=k=>D(o).start_date=k),mask:"date","hide-bottom-space":"",dense:"",label:"Start Date",rules:["date"],readonly:D(i)},{append:N(()=>[H(ue,{name:"event",class:"cursor-pointer"},{default:N(()=>[H(Kt,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:N(()=>[H(Zt,{modelValue:D(o).start_date,"onUpdate:modelValue":C[3]||(C[3]=k=>D(o).start_date=k)},{default:N(()=>[le("div",wo,[Pt(H(U,{label:"Close",color:"primary",flat:""},null,512),[[Yt]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","readonly"]),H($e,{filled:"","hide-bottom-space":"",dense:"",modelValue:D(o).due_date,"onUpdate:modelValue":C[6]||(C[6]=k=>D(o).due_date=k),mask:"date",label:"Due Date",rules:["date"],readonly:D(i)},{append:N(()=>[H(ue,{name:"event",class:"cursor-pointer"},{default:N(()=>[H(Kt,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:N(()=>[H(Zt,{modelValue:D(o).due_date,"onUpdate:modelValue":C[5]||(C[5]=k=>D(o).due_date=k)},{default:N(()=>[le("div",_o,[Pt(H(U,{label:"Close",color:"primary",flat:""},null,512),[[Yt]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","readonly"]),H(ot,{modelValue:D(o).priority,"onUpdate:modelValue":C[7]||(C[7]=k=>D(o).priority=k),"error-message":D(r).priority,error:D(r).priority!==void 0,filled:"","hide-bottom-space":"",dense:"",options:h,label:"Priority",readonly:D(i)},null,8,["modelValue","error-message","error","readonly"]),e.hide.includes("milestone")?Ot("",!0):(ae(),Ae(ot,{key:0,filled:"","use-input":"",dense:"","hide-bottom-space":"",modelValue:D(o).milestone,"onUpdate:modelValue":C[8]||(C[8]=k=>D(o).milestone=k),"error-message":D(r).milestone,error:D(r).milestone!==void 0,label:"Milestone","input-debounce":"1000",options:D(s).options.value,onFilter:D(s).filterFn,onFilterAbort:D(s).abortFilterFn,readonly:D(i)},{"no-option":N(()=>[H(vt,null,{default:N(()=>[H(Ue,{class:"text-grey"},{default:N(()=>[da(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","error-message","error","options","onFilter","onFilterAbort","readonly"])),D(c).formMode.isShow()||D(c).formMode.isUpdate()?(ae(),Ae(on,{key:1},{default:N(()=>[H(va,{modelValue:x.value,"onUpdate:modelValue":C[9]||(C[9]=k=>x.value=k),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:N(()=>[H(Bt,{name:"comment",label:"Comment"}),H(Bt,{name:"note",label:"Note"})]),_:1},8,["modelValue"]),H(an),H(Ta,{modelValue:x.value,"onUpdate:modelValue":C[10]||(C[10]=k=>x.value=k),animated:""},{default:N(()=>[H(Nt,{name:"comment"},{default:N(()=>[H(bo,{id:D(o).id,type:"tasks"},null,8,["id"])]),_:1}),H(Nt,{name:"note"},{default:N(()=>[H(Pa,{id:D(o).id,type:"tasks"},null,8,["id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):Ot("",!0)]),_:1})]))}};var Co=Object.freeze(Object.defineProperty({__proto__:null,default:kn},Symbol.toStringTag,{value:"Module"}));const Oo={__name:"TaskIndexTemplate",props:{id:Number,type:String,isCustom:{type:Boolean,default:!1},hide:{type:Array,default:()=>[]},custom:Object,tabsConfig:Object},setup(e){const t=e,a={title:"Task",url:"custom-apps/tasks",columns:[{name:"name",align:"left",label:"Name",field:"name",sortable:!0},{name:"description",align:"left",label:"Description",field:"description",sortable:!1,format:h=>h&&h.length>15?h.substring(0,15)+"...":h},{name:"status",align:"left",label:"Status",field:"status",sortable:!0,format:h=>h==null?void 0:h.label},{name:"due_date",align:"left",label:"Due Date",field:"due_date",sortable:!0},{name:"priority",align:"left",label:"Priority",field:"priority",sortable:!0,format:h=>h==null?void 0:h.label},{name:"tags",align:"left",label:"Tags",field:"tags",sortable:!0},{name:"created_at",align:"left",label:"Created at",field:"created_at",sortable:!0}],formInitialValues:{name:"",label:"",description:""},tabsConfig:t.tabsConfig,template:()=>Xt(()=>Jt(()=>Promise.resolve().then(function(){return Co}),void 0))},o=sn(),i=ft({title:a.title,url:a.url});i.hooksCycle.params.resolvedParams=h=>{var s;return t.isCustom?h.params={...h.params,...(s=t.custom.params)!=null?s:{}}:(h.params["filter[resource_id]"]=t.id,h.params["filter[resource_type]"]=t.type),h};const r=mt({title:a.title,url:a.url,initialValues:a.formInitialValues});r.hooksCycle.afterResolve=h=>{var s,w,M;return t.isCustom?h=(M=(w=(s=t.custom).resolvedFields)==null?void 0:w.call(s,h))!=null?M:h:(h.resource_id=t.id,h.resource_type=t.type),h},r.hooksCycle.beforeOpenForm=h=>(h.description=h.description?h.description:"",h),a.formHandleHooks=o,a.formHooks=r,a.indexHooks=i;const{form:u}=o;_(()=>a.template());const{resetFetch:c,refresh:p}=i;return Ie(()=>{p()}),(h,s)=>(ae(),qe("div",null,[H(rn,Qe(a,{bodyClass:"q-pa-sm"}),null,16),H(ln,Qe({formStyle:"width: 600px; max-width:90vw;",ref_key:"form",ref:u},a,{onOnCreate:D(c),onOnUpdate:D(p)}),{default:N(()=>[H(kn,{formHooks:a.formHooks,hide:e.hide},null,8,["formHooks","hide"])]),_:1},16,["onOnCreate","onOnUpdate"])]))}};export{Ta as Q,Pa as _,Nt as a,Oo as b,Kt as c,Zt as d,Va as e};
