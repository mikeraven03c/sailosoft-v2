import{bk as Q,E as h,r as j,a1 as i,a4 as d,a7 as a,a3 as n,af as e,a2 as U,bh as O,a0 as $,a8 as w,a9 as q,aB as f,_ as D,a5 as k,a6 as z,aI as W}from"./index.74d7f585.js";import{Q as N,d as M}from"./format.08b9b864.js";import{Q as H}from"./QSelect.6e6a07ef.js";import{H as T,Q as G,a as x,b as J,c as _,_ as K}from"./NoteIndexTemplate.17f07146.js";import{a as I,Q as P,_ as E}from"./FormModal.78f5b439.js";import{Q as X}from"./QForm.b6b25a10.js";import{s as A}from"./selectRenderHooks.8e94ca0e.js";import{_ as Y}from"./OrganizationFormTemplate.cb4f8620.js";import Z from"./ContactFormTemplate.e1f411c3.js";import"./touch.654b88c8.js";import"./ResourceForm.a3f7e177.js";import"./ContextMenu.5e794d2d.js";import"./QList.850a9c5c.js";import"./ClosePopup.f0cb9b11.js";import"./IndexManagement.70bc027e.js";import"./QSpace.19d9814e.js";const ee={key:0,class:"q-ma-xl"},oe={key:1,class:"q-gutter-md q-mt-xs"},ae={key:0,class:"q-ma-xl"},le={key:1,class:"q-gutter-md q-mt-xs"},ke={__name:"LeadFormTemplate",props:{formHooks:Object},setup(B){const{formHooks:L}=B,{formData:r,formReadonly:b,formError:s,hooksCycle:R,actions:S}=L,F=A({url:"custom-apps/contacts",map:t=>({label:t.name,value:t.id})}),c=T({url:"custom-apps/contacts"}),v=T({url:"custom-apps/organizations"}),C=A({url:"custom-apps/organizations",map:t=>({label:t.name,value:t.id})}),m=I({title:"Organization",url:"custom-apps/organizations"});m.hooksCycle.afterCreate=t=>{r.value.organization={label:t.name,value:t.id}};const p=I({title:Q.title,url:Q.url});p.hooksCycle.afterCreate=t=>{r.value.contact={label:t.name,value:t.id}},R.afterResolve=t=>(t.is_lead=!0,t.contact&&(t.contact_id=t.contact.value),t.organization&&(t.organization_id=t.organization.value),t),h(()=>{var t,o;S.formMode.isShow()&&(r.value.contact&&c.fetch((t=r.value.contact_id)!=null?t:r.value.contact.value),r.value.organization&&v.fetch((o=r.value.organization_id)!=null?o:r.value.organization.value))});const V=j("contact");return(t,o)=>(i(),d("div",null,[a(X,{class:"q-gutter-md q-mt-xs"},{default:n(()=>[a(H,{filled:"","use-input":"",dense:"","hide-bottom-space":"",modelValue:e(r).contact,"onUpdate:modelValue":o[1]||(o[1]=l=>e(r).contact=l),"error-message":e(s).contact,error:e(s).contact!==void 0,label:"Contact","input-debounce":"1000",options:e(F).options.value,onFilter:e(F).filterFn,onFilterAbort:e(F).abortFilterFn,readonly:e(b),clearable:""},{append:n(()=>[e(r).contact?w("",!0):(i(),U($,{key:0,class:"cursor-pointer",name:"add_circle",onClick:o[0]||(o[0]=O(l=>e(p).actions.form.create(),["stop","prevent"]))}))]),"no-option":n(()=>[a(N,null,{default:n(()=>[a(M,{class:"text-grey"},{default:n(()=>[q(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","error-message","error","options","onFilter","onFilterAbort","readonly"]),a(H,{filled:"","use-input":"",dense:"","hide-bottom-space":"",modelValue:e(r).organization,"onUpdate:modelValue":o[3]||(o[3]=l=>e(r).organization=l),"error-message":e(s).organization,error:e(s).organization!==void 0,label:"Organization","input-debounce":"1000",options:e(C).options.value,onFilter:e(C).filterFn,onFilterAbort:e(C).abortFilterFn,readonly:e(b),clearable:""},{append:n(()=>[e(r).organization?w("",!0):(i(),U($,{key:0,class:"cursor-pointer",name:"add_circle",onClick:o[2]||(o[2]=O(l=>e(m).actions.form.create(),["stop","prevent"]))}))]),"no-option":n(()=>[a(N,null,{default:n(()=>[a(M,{class:"text-grey"},{default:n(()=>[q(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","error-message","error","options","onFilter","onFilterAbort","readonly"]),a(f,{modelValue:e(r).title,"onUpdate:modelValue":o[4]||(o[4]=l=>e(r).title=l),filled:"",label:"Title *",outlined:"","hide-bottom-space":"",dense:"",readonly:e(b),"error-message":e(s).title,error:e(s).title!==void 0},null,8,["modelValue","readonly","error-message","error"]),a(f,{modelValue:e(r).value,"onUpdate:modelValue":o[5]||(o[5]=l=>e(r).value=l),filled:"",label:"Value",outlined:"","hide-bottom-space":"",dense:"",readonly:e(b),"error-message":e(s).value,error:e(s).value!==void 0},null,8,["modelValue","readonly","error-message","error"]),a(H,{modelValue:e(r).label,"onUpdate:modelValue":o[6]||(o[6]=l=>e(r).label=l),"error-message":e(s).label,error:e(s).label!==void 0,filled:"","hide-bottom-space":"",dense:"",options:["Hot","Warm","Cold"],label:"Label"},null,8,["modelValue","error-message","error"]),a(f,{modelValue:e(r).source,"onUpdate:modelValue":o[7]||(o[7]=l=>e(r).source=l),filled:"",label:"Source",outlined:"","hide-bottom-space":"",dense:"",readonly:e(b),"error-message":e(s).source,error:e(s).source!==void 0},null,8,["modelValue","readonly","error-message","error"]),e(S).formMode.isShow()?(i(),U(W,{key:0},{default:n(()=>[a(G,{modelValue:V.value,"onUpdate:modelValue":o[8]||(o[8]=l=>V.value=l),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:n(()=>[a(x,{name:"contact",label:"Contact"}),a(x,{name:"organization",label:"Organization"}),a(x,{name:"note",label:"Notes"})]),_:1},8,["modelValue"]),a(D),a(J,{modelValue:V.value,"onUpdate:modelValue":o[11]||(o[11]=l=>V.value=l),animated:""},{default:n(()=>[a(_,{name:"contact"},{default:n(()=>{var l,y;return[e(c).loading.value?(i(),d("div",ee,[a(P,{showing:e(c).loading.value,color:"primary"},null,8,["showing"])])):(i(),d("div",oe,[a(f,{modelValue:e(c).record.value.name,"onUpdate:modelValue":o[9]||(o[9]=u=>e(c).record.value.name=u),filled:"",label:"Name",outlined:"","hide-bottom-space":"",dense:"",readonly:""},null,8,["modelValue"]),(i(!0),d(k,null,z((l=e(c).record.value)==null?void 0:l.emails,(u,g)=>(i(),d("div",{key:g},[a(f,{readonly:"",type:"email",dense:"",filled:"","model-value":u,label:"Email"},null,8,["model-value"])]))),128)),(i(!0),d(k,null,z((y=e(c).record.value)==null?void 0:y.phones,(u,g)=>(i(),d("div",{key:g},[a(f,{readonly:"",dense:"",filled:"","model-value":u,label:"Phone"},null,8,["model-value"])]))),128))]))]}),_:1}),a(_,{name:"organization"},{default:n(()=>{var l,y;return[e(v).loading.value?(i(),d("div",ae,[a(P,{showing:e(v).loading.value,color:"primary"},null,8,["showing"])])):(i(),d("div",le,[a(f,{modelValue:e(v).record.value.name,"onUpdate:modelValue":o[10]||(o[10]=u=>e(v).record.value.name=u),filled:"",label:"Name",outlined:"","hide-bottom-space":"",dense:"",readonly:""},null,8,["modelValue"]),(i(!0),d(k,null,z((l=e(v).record.value)==null?void 0:l.emails,(u,g)=>(i(),d("div",{key:g},[a(f,{readonly:"",type:"email",dense:"",filled:"","model-value":u,label:"Email"},null,8,["model-value"])]))),128)),(i(!0),d(k,null,z((y=e(v).record.value)==null?void 0:y.phones,(u,g)=>(i(),d("div",{key:g},[a(f,{readonly:"",dense:"",filled:"","model-value":u,label:"Phone"},null,8,["model-value"])]))),128))]))]}),_:1}),a(_,{name:"note"},{default:n(()=>[a(K,{id:e(r).id,type:"opportunities"},null,8,["id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):w("",!0)]),_:1}),a(E,{modelValue:e(m).formShow.value,"onUpdate:modelValue":o[12]||(o[12]=l=>e(m).formShow.value=l),mode:e(m).formMode.value,title:"Organization",loading:e(m).formProcessing.value,onOnCreate:o[13]||(o[13]=l=>e(m).onCreate({})),onOnUpdate:o[14]||(o[14]=l=>e(m).onUpdate({}))},{form:n(()=>[a(Y,{formHooks:e(m)},null,8,["formHooks"])]),_:1},8,["modelValue","mode","loading"]),a(E,{modelValue:e(p).formShow.value,"onUpdate:modelValue":o[15]||(o[15]=l=>e(p).formShow.value=l),mode:e(p).formMode.value,title:e(Q).title,loading:e(p).formProcessing.value,onOnCreate:o[16]||(o[16]=l=>e(p).onCreate({})),onOnUpdate:o[17]||(o[17]=l=>e(p).onUpdate({}))},{form:n(()=>[a(Z,{formHooks:e(p)},null,8,["formHooks"])]),_:1},8,["modelValue","mode","title","loading"])]))}};export{ke as default};
