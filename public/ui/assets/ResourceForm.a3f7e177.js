import{a1 as N,a4 as A,ae as E,aa as D,a7 as c,a3 as p,af as e,aB as I,aC as w,a0 as Q,a9 as j,aD as q,a2 as B,aE as P}from"./index.74d7f585.js";import{_ as T,Q as _,a as z}from"./ContextMenu.5e794d2d.js";import{I as G,Q as J}from"./IndexManagement.70bc027e.js";import{F as K,f as L,_ as W,a as X}from"./FormModal.78f5b439.js";function Y({append:t=[],prepend:f=[]},O){const{formHandleHooks:k=()=>{},indexHooks:d=()=>{}}=O;function a(o,l,y){o.find(g=>g.name==l).onClick(y,{formHandleHooks:k,indexHooks:d})}return{onAppendClick:(o,l)=>{a(t,o,l)},onPrependClick:(o,l)=>{a(f,o,l)}}}const Z={class:"text-h5 q-pa-sm text-bold"},le={__name:"ResourceIndex",props:{title:String,url:String,columns:{type:Array,default:()=>[{name:"id",align:"left",label:"Id",field:"id",sortable:!0},{name:"name",align:"left",label:"Name",field:"name",sortable:!0}]},formHandleHooks:{type:Object,default:()=>K()},indexHooks:{type:Object,default:()=>{}},contextMenuOption:{type:Object,default:()=>({append:[],prepend:[]})},bodyClass:{type:String,default:"q-pa-md"}},setup(t){const{title:f,url:O,columns:k,formHandleHooks:d,indexHooks:a,contextMenuOption:o,bodyClass:l}=t,{form:y,onFormNew:i,onFormEdit:g,onFormShow:F}=d,b=a!=null?a:G({title:f,url:O}),{onAppendClick:h,onPrependClick:v}=Y({append:o.append,prepend:o.prepend},{indexHooks:b,formHandleHooks:d}),C=b.table,H=b.reference,{deleteRecord:R,onRequestFetch:S,resetFetch:$,refresh:V}=b,{selected:m,filter:s,loading:x,tableData:U,pagination:M}=H;return(ee,r)=>(N(),A("div",{class:q(t.bodyClass)},[E("span",Z,D(t.title)+"s",1),E("span",null,[c(J,{flat:"",dense:"",bordered:"",ref_key:"tableRef",ref:C,title:t.title,rows:e(U),columns:t.columns,"row-key":"id",pagination:e(M),"onUpdate:pagination":r[2]||(r[2]=n=>w(M)?M.value=n:null),loading:e(x),filter:e(s),"binary-state-sort":"",onRequest:e(S),selected:e(m),"onUpdate:selected":r[3]||(r[3]=n=>w(m)?m.value=n:null),selection:"multiple"},{"top-left":p(()=>[c(T,{loading:e(x),onOnNew:e(i),onOnRefresh:e(V),onOnDelete:r[0]||(r[0]=n=>e(R)(e(m)))},null,8,["loading","onOnNew","onOnRefresh"])]),"top-right":p(()=>[c(I,{borderless:"",dense:"",debounce:"1000",modelValue:e(s),"onUpdate:modelValue":r[1]||(r[1]=n=>w(s)?s.value=n:null),placeholder:"Search"},{append:p(()=>[c(Q,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell":p(n=>[c(_,{props:n},{default:p(()=>[j(D(n.value),1)]),_:2},1032,["props"]),c(z,{onOnEdit:u=>e(g)(n.row),onOnShow:u=>e(F)(n.row),onOnDelete:u=>e(R)(n.row),append:t.contextMenuOption.append,prepend:t.contextMenuOption.prepend,onOnAppend:u=>e(h)(u,n.row),onOnPrepend:u=>e(v)(u,n.row)},null,8,["onOnEdit","onOnShow","onOnDelete","append","prepend","onOnAppend","onOnPrepend"])]),_:1},8,["title","rows","columns","pagination","loading","filter","onRequest","selected"])])],2))}},re={__name:"ResourceForm",props:{title:{type:String,default:""},url:{type:String,default:""},initialValues:{type:Object,default:()=>({})},formHooks:{type:Object,default:()=>{}}},emits:L,setup(t,{expose:f,emit:O}){const{title:k,url:d,initialValues:a,formHooks:o}=t;function l(){return X({title:k,url:d,initialValues:a})}const y=o||l(),{formShow:i,formMode:g,formProcessing:F,formData:b,formError:h,formReadonly:v,exposedFormFunction:C,handleFormEmit:H,getActions:R}=y,S=O,{onFormCreate:$,onFormUpdate:V}=H(S);return f({...C}),(m,s)=>(N(),B(W,{modelValue:e(i),"onUpdate:modelValue":s[0]||(s[0]=x=>w(i)?i.value=x:null),mode:e(g),title:t.title,loading:e(F),onOnCreate:e($),onOnUpdate:e(V)},{form:p(()=>[P(m.$slots,"default")]),_:3},8,["modelValue","mode","title","loading","onOnCreate","onOnUpdate"]))}};export{le as _,re as a};
